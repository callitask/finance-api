# ===================================================================
# TARGET: Production Configuration
# PURPOSE: Runtime settings for Linux/Docker environment
# PHASE 3 UPDATE: Added RabbitMQ Configuration
# ===================================================================

app.base-url=https://treishfin.treishvaamgroup.com
server.port=8080

# --- OBSERVABILITY & LOGGING (PHASE 2) ---
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=always
logging.file.name=/app/logs/backend.log
logging.logback.rollingpolicy.max-history=3
logging.logback.rollingpolicy.total-size-cap=100MB

# --- RABBITMQ MESSAGING (PHASE 3) ---
spring.rabbitmq.host=treishvaam-rabbitmq
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
# Ensure JSON serialization for messages
spring.rabbitmq.template.exchange=internal.exchange

# --- DATABASE ---
spring.datasource.url=${PROD_DB_URL}
spring.datasource.username=${PROD_DB_USERNAME}
spring.datasource.password=${PROD_DB_PASSWORD}
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# --- JPA ---
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect
spring.jpa.show-sql=false

# --- REDIS ---
spring.cache.type=redis
spring.data.redis.host=treishvaam-redis
spring.data.redis.port=6379
spring.cache.redis.time-to-live=600000

# --- ELASTICSEARCH ---
spring.elasticsearch.uris=http://treishvaam-elastic:9200
spring.elasticsearch.socket-timeout=30s
spring.elasticsearch.connection-timeout=5s

# --- MINIO ---
storage.s3.endpoint=http://treishvaam-minio:9000
storage.s3.region=us-east-1
storage.s3.access-key=admin
storage.s3.secret-key=treishvaam_storage_secret
storage.s3.bucket=treishvaam-uploads

# --- LIQUIBASE ---
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml

# --- SECURITY ---
jwt.secret=${JWT_SECRET_KEY}
app.security.internal-secret=${INTERNAL_API_SECRET_KEY}

# --- ADMIN ---
app.admin.email=${APP_ADMIN_EMAIL}
app.admin.password=${APP_ADMIN_PASSWORD}
app.admin.username=admin

# --- EXTERNAL APIS ---
fmp.api.key=${MARKET_DATA_API_KEY}
alphavantage.api.key=${ALPHAVANTAGE_API_KEY}
finnhub.api.key=${FINNHUB_API_KEY}
newsdata.api.key=${NEWS_API_KEY}

# --- GOOGLE ANALYTICS ---
ga4.property-id=${GA4_PROPERTY_ID}
ga4.credentials-path=/app/ga4-credentials.json

# --- FILE PATHS ---
storage.upload-dir=/app/uploads
storage.sitemap-dir=/app/sitemaps
app.python.script.path=/app/scripts/market_data_updater.py