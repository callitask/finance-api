"use strict";(self.webpackChunktreishvaam_finance_frontend=self.webpackChunktreishvaam_finance_frontend||[]).push([[161],{639:(e,t,s)=>{s.d(t,{A:()=>u});const a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],r=e=>{let t=0;for(let s=0;s<e.length;s++){const r=e[s];t=83*t+a.indexOf(r)}return t},l=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},o=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.round(12.92*t*255+.5):Math.round(255*(1.055*Math.pow(t,1/2.4)-.055)+.5)},n=(e,t)=>(e<0?-1:1)*Math.pow(Math.abs(e),t);class c extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}}const d=e=>{if(!e||e.length<6)throw new c("The blurhash string must be at least 6 characters");const t=r(e[0]),s=Math.floor(t/9)+1,a=t%9+1;if(e.length!==4+2*a*s)throw new c("blurhash length mismatch: length is ".concat(e.length," but it should be ").concat(4+2*a*s))},i=e=>{const t=e>>8&255,s=255&e;return[l(e>>16),l(t),l(s)]},h=(e,t)=>{const s=Math.floor(e/361),a=Math.floor(e/19)%19,r=e%19;return[n((s-9)/9,2)*t,n((a-9)/9,2)*t,n((r-9)/9,2)*t]},u=(e,t,s,a)=>{d(e),a|=1;const l=r(e[0]),n=Math.floor(l/9)+1,c=l%9+1,u=(r(e[1])+1)/166,x=new Array(c*n);for(let o=0;o<x.length;o++)if(0===o){const t=r(e.substring(2,6));x[o]=i(t)}else{const t=r(e.substring(4+2*o,6+2*o));x[o]=h(t,u*a)}const m=4*t,b=new Uint8ClampedArray(m*s);for(let r=0;r<s;r++)for(let e=0;e<t;e++){let a=0,l=0,d=0;for(let o=0;o<n;o++)for(let n=0;n<c;n++){const i=Math.cos(Math.PI*e*n/t)*Math.cos(Math.PI*r*o/s);let h=x[n+o*c];a+=h[0]*i,l+=h[1]*i,d+=h[2]*i}let i=o(a),h=o(l),u=o(d);b[4*e+0+r*m]=i,b[4*e+1+r*m]=h,b[4*e+2+r*m]=u,b[4*e+3+r*m]=255}return b}},1748:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(9379),r=s(5043),l=s(9634),o=s(6355),n=s(639),c=s(579);const d=e=>{let{blurHash:t,width:s,height:a}=e;const l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!t||!l.current||!s||!a)return;const e=Math.max(1,Math.round(32*a/s));let r;try{r=(0,n.A)(t,32,e)}catch(h){return void console.warn("Failed to decode blurhash:",h)}const o=l.current.getContext("2d"),c=o.createImageData(32,e);c.data.set(r);const d=document.createElement("canvas");d.width=32,d.height=e;d.getContext("2d").putImageData(c,0,0);const i=l.current;i.width=i.clientWidth,i.height=i.clientHeight,o.clearRect(0,0,i.width,i.height),o.imageSmoothingEnabled=!0,o.drawImage(d,0,0,d.width,d.height,0,0,i.width,i.height)},[t,s,a]),(0,c.jsx)("canvas",{ref:l,className:"absolute inset-0 w-full h-full block","aria-hidden":"true"})},i=e=>{let{baseName:t,alt:s,className:n="",sizes:i,onLoad:h,width:u,height:x,blurHash:m,eager:b=!1}=e;const[g,p]=(0,r.useState)(!1);if(!t||"string"!==typeof t)return(0,c.jsx)("div",{className:"bg-gray-200 w-full h-full ".concat(n)});const y=t.match(/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/);let f;f=y?y[0]:t.endsWith(".webp")?t.slice(0,-5):t;const w="".concat(o.H$,"/api/uploads/").concat(f,"-small.webp"),j="".concat(o.H$,"/api/uploads/").concat(f,"-tiny.webp"),N=["".concat(o.H$,"/api/uploads/").concat(f,"-small.webp 300w"),"".concat(o.H$,"/api/uploads/").concat(f,"-medium.webp 600w"),"".concat(o.H$,"/api/uploads/").concat(f,".webp 1200w")].join(", "),v=e=>{p(!0),"function"===typeof h&&h(e)};return b?(0,c.jsx)("img",(0,a.A)((0,a.A)({alt:s,src:w,srcSet:N,sizes:i,className:n,onLoad:v,fetchpriority:"high"},u&&{width:u}),x&&{height:x})):(0,c.jsxs)("div",{className:"w-full h-full relative overflow-hidden bg-gray-100",children:[m&&u&&x?(0,c.jsx)(d,{blurHash:m,width:u,height:x}):(0,c.jsx)("img",{src:j,alt:s||"",className:"absolute inset-0 w-full h-full object-cover block","aria-hidden":"true",style:{transform:"scale(1.02)"}}),(0,c.jsx)(l.LazyLoadImage,{alt:s,src:w,srcSet:N,sizes:i,effect:null,className:"".concat(n," transition-opacity duration-500 ").concat(g?"opacity-100":"opacity-0"),afterLoad:v,loading:"lazy"})]})}},6161:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(9379),r=s(5043),l=s(1045),o=s(6355),n=s(1748),c=s(579);const d=e=>{let{post:t,onShare:s,onClose:a}=e;const[l,o]=(0,r.useState)(""),[n,d]=(0,r.useState)(""),i="https://treishfin.treishvaamgroup.com/blog/".concat(t.id);return(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Share to LinkedIn"}),(0,c.jsxs)("p",{className:"mb-2 text-sm text-gray-600",children:[(0,c.jsx)("strong",{children:"Post:"})," ",t.title]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Message (Optional)"}),(0,c.jsx)("textarea",{id:"message",value:l,onChange:e=>o(e.target.value),rows:"4",className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",placeholder:"Check out this article: ".concat(t.title,"\n\n").concat(i)})]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hashtags (comma-separated)"}),(0,c.jsx)("input",{type:"text",id:"tags",value:n,onChange:e=>d(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",placeholder:"e.g., #finance, #investing, #fintech"})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)("button",{onClick:a,className:"py-2 px-4 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,c.jsx)("button",{onClick:()=>{s({postId:t.id,message:l,tags:n.split(",").map(e=>e.trim()).filter(Boolean)})},className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Share to LinkedIn"})]})]})})};var i=s(184);const h=e=>{if(!e)return"No date available";const t=new Date(e);return isNaN(t.getTime())?"No date available":t.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})},u=e=>{if(!e||"DEFAULT"===e)return"Masonry";if("BANNER"===e)return"Banner";if(e.startsWith("MULTI_COLUMN_")){const t=e.split("_")[2];return"".concat(t," Column Row")}return e},x=e=>{let{posts:t,handleDelete:s,handleDuplicate:a,handleOpenShareModal:o,isScheduled:d=!1,isDraft:x=!1,selectedPostIds:m,onSelectOne:b,onSelectAll:g,isAddColumnDisabled:p}=e;const y=(0,l.Zp)(),f=(0,r.useMemo)(()=>t.length>0&&m.length===t.length,[m,t]);return t&&0!==t.length?(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left",children:(0,c.jsx)("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-sky-600 rounded focus:ring-sky-500",checked:f,onChange:g})}),(0,c.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Title"}),(0,c.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),(0,c.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Post Layout"}),(0,c.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:x?"Last Saved":d?"Scheduled For":"Last Updated"}),(0,c.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,c.jsx)("tbody",{children:t.map(e=>{var t;return(0,c.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(m.includes(e.id)?"bg-sky-50":""),children:[(0,c.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,c.jsx)("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-sky-600 rounded focus:ring-sky-500",checked:m.includes(e.id),onChange:()=>b(e.id)})}),(0,c.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("div",{className:"flex-shrink-0 w-10 h-10 mr-4",children:(0,c.jsx)(n.A,{baseName:e.thumbnails&&e.thumbnails.length>0?e.thumbnails[0].imageUrl:null,alt:e.title,className:"w-full h-full rounded-full object-cover",sizes:"40px"})}),(0,c.jsx)("p",{className:"text-gray-900 font-medium",children:e.title})]})}),(0,c.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,c.jsx)("span",{className:"bg-gray-100 text-gray-700 text-xs font-semibold px-2 py-1 rounded-full",children:(null===(t=e.category)||void 0===t?void 0:t.name)||"N/A"})}),(0,c.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,c.jsx)("span",{className:"text-gray-800",children:u(e.layoutStyle)})}),(0,c.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,c.jsx)("p",{className:"text-gray-900",children:h(d?e.scheduledTime:e.updatedAt||e.createdAt)})}),(0,c.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[!d&&!x&&(0,c.jsx)("button",{onClick:()=>o(e),className:"text-gray-500 hover:text-green-600",title:"Share",children:(0,c.jsx)(i.eb3,{})}),(0,c.jsx)("button",{onClick:()=>y("/dashboard/blog/edit/".concat(e.userFriendlySlug,"/").concat(e.id)),className:"text-gray-500 hover:text-sky-600",title:"Edit",children:(0,c.jsx)(i.uO9,{})}),(0,c.jsx)("button",{onClick:()=>s(e.id),className:"text-gray-500 hover:text-red-600",title:"Delete",children:(0,c.jsx)(i.qbC,{})}),e.layoutStyle&&e.layoutStyle.startsWith("MULTI_COLUMN")&&(0,c.jsx)("button",{onClick:()=>a(e.id),className:"text-gray-500 ".concat(p(e.layoutGroupId,e.layoutStyle)?"opacity-50 cursor-not-allowed":"hover:text-blue-600"),title:p(e.layoutGroupId,e.layoutStyle)?"Group is full":"Add post column",disabled:p(e.layoutGroupId,e.layoutStyle),children:(0,c.jsx)(i.paH,{})})]})})]},e.id)})})]})}):(0,c.jsxs)("p",{className:"p-6 text-center text-gray-500",children:["No ",x?"drafts":d?"scheduled":"published"," posts found."]})},m=()=>{const e=(0,l.zy)(),[t,s]=(0,r.useState)([]),[n,h]=(0,r.useState)([]),[u,m]=(0,r.useState)(""),[b,g]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),[f,w]=(0,r.useState)("published"),[j,N]=(0,r.useState)([]),v=(0,r.useCallback)(async()=>{try{const[e,t]=await Promise.all([(0,o.pr)(),(0,o.Vp)()]);s(e.data||[]),h(t.data||[])}catch(e){m("Failed to fetch posts or drafts."),console.error(e)}},[]);(0,r.useEffect)(()=>{v()},[v]),(0,r.useEffect)(()=>{"#drafts"===e.hash&&w("drafts")},[e.hash]),(0,r.useEffect)(()=>{N([])},[f]);const{publishedPosts:k,scheduledPosts:S}=(0,r.useMemo)(()=>({publishedPosts:t.filter(e=>"PUBLISHED"===e.status),scheduledPosts:t.filter(e=>"SCHEDULED"===e.status)}),[t]),C=(0,r.useMemo)(()=>{const e={};return[...t,...n].forEach(t=>{t.layoutGroupId&&(e[t.layoutGroupId]=(e[t.layoutGroupId]||0)+1)}),e},[t,n]),M=(0,r.useCallback)((e,t)=>{if(!e||!t||!t.startsWith("MULTI_COLUMN"))return!0;try{const s=parseInt(t.split("_")[2],10);return(C[e]||0)>=s}catch(s){return!0}},[C]),A=(0,r.useMemo)(()=>"published"===f?k:"drafts"===f?n:"scheduled"===f?S:[],[f,k,n,S]),I=e=>{if(e.target.checked){const e=A.map(e=>e.id);N(e)}else N([])},L={handleDelete:async e=>{if(window.confirm("Are you sure you want to delete this post?"))try{await(0,o.ys)(e),await v()}catch(t){m("Failed to delete the post.")}},handleDuplicate:async e=>{if(window.confirm("This will create a new draft by duplicating the selected post's layout. Continue?"))try{await(0,o.QL)(e),await v(),w("drafts")}catch(t){m("Failed to duplicate the post."),console.error(t)}},handleOpenShareModal:e=>{y(e),g(!0)},selectedPostIds:j,onSelectOne:e=>{N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},isAddColumnDisabled:M};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"container mx-auto p-6",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Manage Posts"}),(0,c.jsxs)(l.N_,{to:"/dashboard/blog/new",className:"bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 transition flex items-center",children:[(0,c.jsx)(i.OiG,{className:"mr-2"})," Create New Post"]})]}),j.length>0&&(0,c.jsxs)("div",{className:"mb-4 p-3 bg-sky-100 border border-sky-200 rounded-lg flex items-center gap-4",children:[(0,c.jsxs)("p",{className:"text-sm font-semibold text-sky-800",children:[j.length," post(s) selected."]}),(0,c.jsxs)("button",{onClick:async()=>{if(0!==j.length&&window.confirm("Are you sure you want to delete ".concat(j.length," selected post(s)?")))try{await(0,o.bT)(j),N([]),await v()}catch(e){m("Failed to delete the selected posts."),console.error(e)}},className:"bg-red-600 text-white text-sm font-bold py-1 px-3 rounded-lg hover:bg-red-700 transition flex items-center",children:[(0,c.jsx)(i.qbC,{className:"mr-2"})," Delete Selected"]})]}),(0,c.jsx)("div",{className:"mb-4 border-b border-gray-200",children:(0,c.jsxs)("nav",{className:"flex space-x-4","aria-label":"Tabs",children:[(0,c.jsxs)("button",{onClick:()=>w("published"),className:"px-3 py-2 font-medium text-sm rounded-t-lg ".concat("published"===f?"border-b-2 border-sky-600 text-sky-600":"text-gray-500 hover:text-gray-700"),children:["Published (",k.length,")"]}),(0,c.jsxs)("button",{onClick:()=>w("drafts"),className:"px-3 py-2 font-medium text-sm rounded-t-lg ".concat("drafts"===f?"border-b-2 border-sky-600 text-sky-600":"text-gray-500 hover:text-gray-700"),children:["Drafts (",n.length,")"]}),(0,c.jsxs)("button",{onClick:()=>w("scheduled"),className:"px-3 py-2 font-medium text-sm rounded-t-lg ".concat("scheduled"===f?"border-b-2 border-sky-600 text-sky-600":"text-gray-500 hover:text-gray-700"),children:["Scheduled (",S.length,")"]})]})}),u&&(0,c.jsx)("p",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:u}),(0,c.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:["published"===f&&(0,c.jsx)(x,(0,a.A)((0,a.A)({posts:k},L),{},{onSelectAll:I})),"drafts"===f&&(0,c.jsx)(x,(0,a.A)((0,a.A)({posts:n},L),{},{onSelectAll:I,isDraft:!0})),"scheduled"===f&&(0,c.jsx)(x,(0,a.A)((0,a.A)({posts:S},L),{},{onSelectAll:I,isScheduled:!0}))]})]}),b&&(0,c.jsx)(d,{post:p,onClose:()=>g(!1)})]})}}}]);
//# sourceMappingURL=161.5a576d52.chunk.js.map