"use strict";(self.webpackChunktreishvaam_finance_frontend=self.webpackChunktreishvaam_finance_frontend||[]).push([[659],{1580:()=>{},1748:(e,s,t)=>{t.d(s,{A:()=>r});t(5043);var a=t(9634),l=(t(1580),t(6355)),n=t(579);const r=e=>{let{baseName:s,alt:t,className:r,sizes:i,onLoad:o}=e;if(!s||"string"!==typeof s)return(0,n.jsx)("div",{className:"bg-gray-200 ".concat(r)});const c=s.match(/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/);if(!c)return console.warn('ResponsiveAuthImage: Could not extract a valid image ID from baseName: "'.concat(s,'"')),(0,n.jsx)("div",{className:"bg-gray-200 ".concat(r)});const d=c[0],m="".concat(l.H$,"/api/uploads/").concat(d,"-small.webp"),x="".concat(l.H$,"/api/uploads/").concat(d,"-tiny.webp"),h=["".concat(l.H$,"/api/uploads/").concat(d,"-small.webp 300w"),"".concat(l.H$,"/api/uploads/").concat(d,"-medium.webp 600w"),"".concat(l.H$,"/api/uploads/").concat(d,".webp 1200w")].join(", ");return(0,n.jsx)(a.LazyLoadImage,{alt:t,src:m,srcSet:h,sizes:i,placeholderSrc:x,effect:"blur",className:r,afterLoad:o})}},4472:(e,s,t)=>{t.d(s,{A:()=>h});var a=t(9379),l=t(5043),n=t(6355),r=t(184);const i=e=>{if(e<0)return{hours:0,minutes:0,seconds:0,isFinished:!0};return{hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),isFinished:!1}};var o=t(579);const c=e=>{let{log:s}=e;const t="SUCCESS"===s.status;return(0,o.jsxs)("div",{className:"text-xs border-l-4 pl-3",style:{borderColor:t?"#10B981":"#EF4444"},children:[(0,o.jsxs)("div",{className:"flex items-center font-semibold",style:{color:t?"#059669":"#DC2626"},children:[t?(0,o.jsx)(r.A7C,{className:"mr-2"}):(0,o.jsx)(r.TNq,{className:"mr-2"}),s.status," - ",(0,o.jsx)("span",{className:"font-normal text-gray-500 ml-1",children:(a=s.lastFetchTime,new Date(a).toLocaleString())})]}),(0,o.jsxs)("p",{className:"text-gray-600 mt-1",children:["Source: ",(0,o.jsx)("span",{className:"font-medium",children:s.triggerSource}),". Details: ",s.details]})]});var a},d=e=>{let{title:s,logs:t,onRefresh:a,onFlush:n,nextRefreshTime:d}=e;const[m,x]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),{hours:p,minutes:b,seconds:j,isFinished:N}=(e=>{const s=(0,l.useMemo)(()=>new Date(e).getTime(),[e]),[t,a]=(0,l.useState)(s-(new Date).getTime());return(0,l.useEffect)(()=>{const e=setInterval(()=>{a(s-(new Date).getTime())},1e3);return()=>clearInterval(e)},[s]),i(t)})(d),y=async(e,s)=>{u(!0);try{await s(e)}catch(t){console.error("Flush failed:",t)}u(!1)},v=e=>e.toString().padStart(2,"0"),w=N?"Refresh due":"".concat(v(p),"h ").concat(v(b),"m ").concat(v(j),"s"),C=g?t:t.slice(0,3);return(0,o.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:s}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:async()=>{x(!0),await a(),x(!1)},disabled:m,className:"p-2 text-sm text-sky-600 bg-sky-100 hover:bg-sky-200 rounded-full transition disabled:opacity-50 disabled:cursor-wait",title:"Refresh Data Now",children:(0,o.jsx)(r.DIg,{className:m?"animate-spin":""})}),(0,o.jsx)("button",{onClick:()=>n(y),disabled:h,className:"p-2 text-sm text-red-600 bg-red-100 hover:bg-red-200 rounded-full transition disabled:opacity-50",title:"Flush Cached Data",children:(0,o.jsx)(r.qbC,{})})]})]}),d&&(0,o.jsxs)("p",{className:"text-xs text-gray-500 mb-4",children:["Auto-refresh in: ",(0,o.jsx)("span",{className:"font-semibold text-gray-600",children:w})]}),(0,o.jsx)("div",{className:"space-y-3",children:C.length>0?C.map(e=>(0,o.jsx)(c,{log:e},e.id)):(0,o.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No logs available."})}),t.length>3&&(0,o.jsxs)("button",{onClick:()=>f(!g),className:"text-sm text-sky-600 font-semibold mt-4 flex items-center",children:[g?"Show Recent Logs":"Show All Logs",g?(0,o.jsx)(r.Ucs,{className:"ml-2"}):(0,o.jsx)(r.Vr3,{className:"ml-2"})]})]})},m=e=>{let{isOpen:s,onClose:t,onConfirm:a,title:n,isLoading:r}=e;const[i,c]=(0,l.useState)("");if(!s)return null;return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:n}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"This is a destructive action. To confirm, please enter your admin password."}),(0,o.jsx)("input",{type:"password",value:i,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter your password",autoFocus:!0}),(0,o.jsxs)("div",{className:"flex justify-end mt-6 space-x-3",children:[(0,o.jsx)("button",{onClick:()=>{c(""),t()},disabled:r,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{a(i),c("")},disabled:!i||r,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-wait",children:r?"Flushing...":"Confirm & Flush"})]})]})})};function x(e,s,t){const a=new Date;let l=new Date;return l.setUTCHours(e,s,0,0),a.getTime()>l.getTime()&&l.setUTCDate(l.getUTCDate()+1),l}const h=()=>{const[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[i,c]=(0,l.useState)({isOpen:!1,onConfirm:null,title:""}),[h,u]=(0,l.useState)(!1),g=(0,l.useCallback)(async()=>{r(!0);try{const e=await(0,n.r$)();s(e.data)}catch(e){console.error("Failed to fetch API status history:",e)}finally{r(!1)}},[]);(0,l.useEffect)(()=>{g()},[g]);const f=[{title:"US Market Indices (Charts)",logFilters:["Market Chart"],onRefresh:n.FE,flushHandler:n.av,nextRefreshTime:null},{title:"Top Gainers (US)",logFilters:["Market Data - Top Gainers (US)"],onRefresh:n.Cn,flushHandler:n.fk,nextRefreshTime:x(22,0,"UTC")},{title:"Top Losers (US)",logFilters:["Market Data - Top Losers (US)"],onRefresh:n.Cn,flushHandler:n.fk,nextRefreshTime:x(22,0,"UTC")},{title:"Most Active (US)",logFilters:["Market Data - Most Active (US)"],onRefresh:n.Cn,flushHandler:n.fk,nextRefreshTime:x(22,0,"UTC")}];return(0,o.jsxs)("div",{className:"bg-gray-50 p-4 sm:p-6 lg:p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"API Status & Control Center"}),t?(0,o.jsx)("p",{children:"Loading logs..."}):(0,o.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:f.map(s=>{return(0,o.jsx)(d,{title:s.title,logs:(t=s.logFilters,e.filter(e=>t.some(s=>e.apiName.includes(s)))),onRefresh:s.onRefresh,onFlush:e=>{return t=t=>e(t,s.flushHandler),a="Flush ".concat(s.title),void c({isOpen:!0,onConfirm:e=>t(e),title:a});var t,a},nextRefreshTime:s.nextRefreshTime},s.title);var t})}),(0,o.jsx)(m,{isOpen:i.isOpen,onClose:()=>c((0,a.A)((0,a.A)({},i),{},{isOpen:!1})),onConfirm:async e=>{if(i.onConfirm){u(!0);try{await i.onConfirm(e)}catch(a){var s,t;console.error("Action failed:",a),alert("Action failed: ".concat((null===(s=a.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||a.message))}finally{u(!1),c({isOpen:!1,onConfirm:null,title:""}),await g()}}},title:i.title,isLoading:h})]})}},8040:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(5043),l=t(697),n=t(6355),r=t(184),i=t(1045),o=t(1748),c=t(4472),d=t(579);const m=e=>{let{icon:s,title:t,value:a,color:l}=e;return(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm flex items-center",children:[(0,d.jsx)("div",{className:"p-3 rounded-full mr-4 ".concat(l),children:s}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:t}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})},x=()=>{const{user:e}=(0,l.A)(),[s,t]=(0,a.useState)([]),[x,h]=(0,a.useState)(""),u="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:8080"}.REACT_APP_API_BASE_URL||"https://backend.treishvaamgroup.com","/oauth2/authorization/linkedin");(0,a.useEffect)(()=>{const e=async()=>{try{const e=await(0,n.pr)();t(e.data)}catch(e){h("Could not load dashboard data."),console.error(e)}};e();const s=setInterval(e,3e4);return()=>clearInterval(s)},[]);const g=(0,a.useMemo)(()=>[...s].filter(e=>"PUBLISHED"===e.status).sort((e,s)=>new Date(s.updatedAt||s.createdAt)-new Date(e.updatedAt||e.createdAt)).slice(0,5),[s]),f=(0,a.useMemo)(()=>s.filter(e=>"PUBLISHED"===e.status).length,[s]),p=(0,a.useMemo)(()=>s.filter(e=>"SCHEDULED"===e.status).length,[s]);return(0,d.jsxs)("div",{className:"container mx-auto p-6 md:p-8",children:[(0,d.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:["Welcome, ",(null===e||void 0===e?void 0:e.name)||"Admin","!"]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,d.jsx)(m,{icon:(0,d.jsx)(r.t69,{className:"text-white"}),title:"Published Posts",value:f,color:"bg-sky-500"}),(0,d.jsx)(m,{icon:(0,d.jsx)(r.Ny1,{className:"text-white"}),title:"Scheduled Posts",value:p,color:"bg-amber-500"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,d.jsx)(c.A,{}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Quick Actions"}),(0,d.jsxs)(i.N_,{to:"/dashboard/blog/new",className:"w-full flex items-center justify-center bg-sky-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-sky-700 transition duration-300",children:[(0,d.jsx)(r.Hw0,{className:"mr-2"})," Create New Post"]})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Integrations"}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(r.QEs,{className:"text-2xl text-blue-700 mr-3"}),(0,d.jsx)("span",{className:"font-medium",children:"LinkedIn"})]}),e&&e.linkedinConnected?(0,d.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Connected"}):(0,d.jsx)("a",{href:u,className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300",children:"Connect"})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"Connect your LinkedIn account to enable direct sharing of blog posts."})]})]}),(0,d.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Recent Posts"}),(0,d.jsxs)("div",{className:"space-y-4",children:[x&&(0,d.jsx)("p",{className:"text-red-500",children:x}),g.length>0?g.map(e=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-12 h-12 flex-shrink-0 mr-4",children:(0,d.jsx)(o.A,{baseName:e.thumbnails&&e.thumbnails.length>0?e.thumbnails[0].imageUrl:null,alt:e.title,className:"w-full h-full rounded-lg object-cover",sizes:"48px"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-semibold text-gray-800",children:e.title}),(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:["Published on ",new Date(e.updatedAt||e.createdAt).toLocaleDateString()]})]})]}),(0,d.jsx)(i.N_,{to:"/dashboard/blog/edit/".concat(e.userFriendlySlug,"/").concat(e.id),className:"text-sky-600 hover:underline text-sm font-semibold",children:"Edit"})]},e.id)):!x&&(0,d.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No recent posts to display."})]})]})]})]})}}}]);
//# sourceMappingURL=659.08f2c256.chunk.js.map