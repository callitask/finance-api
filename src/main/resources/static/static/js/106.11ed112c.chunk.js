"use strict";(self.webpackChunktreishvaam_finance_frontend=self.webpackChunktreishvaam_finance_frontend||[]).push([[106],{1106:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(5043),r=s(6355),c=s(184),n=s(579);const i=e=>{let{icon:t,value:s,label:a}=e;return(0,n.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,n.jsx)(t,{className:"text-sky-500 mr-2 flex-shrink-0",title:a}),(0,n.jsx)("span",{className:"truncate",title:s||"N/A",children:s||"N/A"})]})},l=()=>{const[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[d,o]=(0,a.useState)(""),[x,m]=(0,a.useState)(null),h=async()=>{l(!0),o("");try{const e=await(0,r.sb)();t(e.data),m(new Date)}catch(e){console.error("Error fetching audience data:",e),!e.response||403!==e.response.status&&401!==e.response.status?o("Failed to fetch real-time audience data. Check backend logs and GA4 setup."):o("Access Denied. You do not have permission to view this data."),t([])}finally{l(!1)}};(0,a.useEffect)(()=>{h();const e=setInterval(h,3e4);return()=>clearInterval(e)},[]);const u=[{key:"user",title:"Active Sessions",render:e=>(0,n.jsx)(i,{icon:c.NBi,value:e.user,label:"Active Users/Sessions"})},{key:"location",title:"Location (City, Region, Country)",render:e=>(0,n.jsx)(i,{icon:c.ZYm,value:"".concat(e.city||"N/A",", ").concat(e.region||"N/A",", ").concat(e.country||"N/A"),label:"Location"})},{key:"device",title:"Device Type",render:e=>(0,n.jsx)(i,{icon:"mobile"===e.device?c.rle:c.Wqt,value:e.device,label:"Device Type"})},{key:"pagePath",title:"Current Page Path",render:e=>(0,n.jsx)("p",{className:"text-xs text-gray-500 truncate max-w-xs",title:e.pagePath,children:e.pagePath})},{key:"source",title:"Source",render:e=>(0,n.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.source})},{key:"time",title:"Report Time",render:e=>(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(new Date).toLocaleTimeString()})}];return(0,n.jsxs)("div",{className:"container mx-auto p-6 md:p-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Real-time Audience Analytics"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Live snapshot of users on your website, sourced from Google Analytics (GA4)."}),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("span",{className:"text-sm text-gray-500",children:["Last updated: ",x?x.toLocaleTimeString():"N/A"]}),(0,n.jsxs)("button",{onClick:h,disabled:s,className:"flex items-center px-4 py-2 text-sm rounded-lg transition duration-300 ".concat(s?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-sky-600 text-white hover:bg-sky-700"),children:[(0,n.jsx)(c.Swo,{className:"mr-2 ".concat(s?"animate-spin":"")}),s?"Loading...":"Refresh Now"]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-x-auto",children:[d&&(0,n.jsxs)("div",{className:"p-4 bg-red-100 text-red-700 border-l-4 border-red-500 flex items-center",children:[(0,n.jsx)(c.BS8,{className:"mr-3 flex-shrink-0 text-xl"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-semibold",children:d}),(0,n.jsx)("p",{className:"text-sm",children:"Please ensure your GA4 property ID and Service Account credentials are correctly configured in the backend and that the Service Account has **Viewer** access to your GA4 property."})]})]}),s&&!d&&0===e.length?(0,n.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,n.jsx)(c.w_X,{className:"mx-auto text-3xl mb-2 animate-pulse"}),(0,n.jsx)("p",{children:"Fetching real-time data..."})]}):(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsx)("tr",{children:u.map(e=>(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:e.title},e.key))})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map((e,t)=>(0,n.jsx)("tr",{className:"hover:bg-sky-50/50",children:u.map(t=>(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t.render(e)},t.key))},t)):!d&&(0,n.jsx)("tr",{children:(0,n.jsxs)("td",{colSpan:u.length,className:"px-6 py-12 text-center text-gray-500",children:[(0,n.jsx)(c.Wqt,{className:"mx-auto text-4xl mb-4 text-gray-400"}),(0,n.jsx)("p",{className:"text-lg font-semibold",children:"No active users detected in the last 30 minutes."}),(0,n.jsx)("p",{className:"text-sm",children:"Data refreshes every 30 seconds."})]})})})]})]})]})}}}]);
//# sourceMappingURL=106.11ed112c.chunk.js.map