(self.webpackChunktreishvaam_finance_frontend=self.webpackChunktreishvaam_finance_frontend||[]).push([[212],{2224:(e,t,a)=>{var s={"./ckb.js":3743,"./cs.js":7333,"./da.js":1664,"./de.js":844,"./en.js":5460,"./es.js":6151,"./fa.js":6062,"./fr.js":7755,"./he.js":3296,"./hu.js":3776,"./index.js":559,"./it.js":4762,"./ja.js":74,"./km.js":7671,"./ko.js":665,"./lv.js":749,"./nl.js":6449,"./pl.js":8599,"./pt_br.js":8366,"./ro.js":3100,"./ru.js":4638,"./se.js":5111,"./tr.js":57,"./ua.js":9657,"./ur.js":4640,"./zh_cn.js":5277};function l(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=r,e.exports=l,l.id=2224},4077:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var s=a(5043),l=a(1045),r=a(1641),n=a(5964),o=a(2734),i=a(335),c=a(7537),d=(a(3475),a(9576),a(1586)),u=a(6355),m=a(9266),h=a(579);const p=s.lazy(()=>Promise.resolve().then(a.t.bind(a,9266,23))),x=e=>{let{tags:t,setTags:a}=e;const[l,r]=(0,s.useState)(""),n=()=>{const e=l.trim().replace(/,/g,"");e&&!t.includes(e)&&a([...t,e]),r("")};return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:t.map(e=>(0,h.jsxs)("div",{className:"bg-sky-100 text-sky-800 text-sm font-semibold px-2 py-1 rounded-full flex items-center",children:[(0,h.jsx)("span",{children:e}),(0,h.jsx)("button",{type:"button",onClick:()=>{return s=e,a(t.filter(e=>e!==s));var s},className:"ml-2 text-sky-600 hover:text-sky-900",children:"\xd7"})]},e))}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("input",{type:"text",value:l,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key||(e.preventDefault(),n())},placeholder:"Add a tag",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-sky-200"}),(0,h.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-sky-600 text-white rounded hover:bg-sky-700",children:"Add"})]})]})},g=e=>new Promise(t=>e.toBlob(e=>t(e),"image/webp",.9));const b=e=>{let{src:t,type:a,onClose:l,onSave:r,aspect:n}=e;const o=(0,s.useRef)(null),i=(0,s.useRef)(null),[c,u]=(0,s.useState)(),[m,p]=(0,s.useState)();(0,s.useEffect)(()=>{null!==m&&void 0!==m&&m.width&&o.current&&i.current&&function(e,t,a){const s=t.getContext("2d");if(!s||!a.width||!a.height)return;const l=e.naturalWidth/e.width,r=e.naturalHeight/e.height,n=window.devicePixelRatio||1;t.width=Math.floor(a.width*l*n),t.height=Math.floor(a.height*r*n),s.scale(n,n),s.imageSmoothingQuality="high";const o=a.x*l,i=a.y*r;s.drawImage(e,o,i,a.width*l,a.height*r,0,0,a.width*l,a.height*r)}(o.current,i.current,m)},[m]);return(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full",children:[(0,h.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Crop Image"}),(0,h.jsx)("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:(0,h.jsx)(d.Ay,{crop:c,onChange:e=>u(e),onComplete:e=>p(e),aspect:n,children:(0,h.jsx)("img",{ref:o,alt:"Crop",src:t})})}),(0,h.jsx)("canvas",{ref:i,className:"hidden"}),(0,h.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,h.jsx)("button",{onClick:l,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cancel"}),(0,h.jsx)("button",{onClick:()=>{m&&i.current&&r(i.current,m)},className:"px-4 py-2 rounded bg-sky-600 text-white hover:bg-sky-700",children:"Save"})]})]})})},y=e=>{let{isOpen:t,onChoice:a}=e;return t?(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full text-center",children:[(0,h.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Square Image Detected"}),(0,h.jsx)("p",{className:"text-gray-600 mb-6",children:"For subsequent images in this story, how should they be cropped?"}),(0,h.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,h.jsx)("button",{onClick:()=>a("landscape"),className:"px-4 py-2 rounded bg-sky-600 text-white hover:bg-sky-700",children:"Lock Height (Landscape Style)"}),(0,h.jsx)("button",{onClick:()=>a("portrait"),className:"px-4 py-2 rounded bg-sky-600 text-white hover:bg-sky-700",children:"Lock Width (Portrait Style)"})]})]})}):null},f=e=>{let{images:t,isOpen:a,onClose:l,onSelect:r}=e;const[n,o]=(0,s.useState)([]);if(!a)return null;return(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-4xl w-full",children:[(0,h.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Select Images from Post"}),(0,h.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-4 max-h-96 overflow-y-auto p-2",children:t.map((e,t)=>(0,h.jsxs)("div",{onClick:()=>(e=>o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]))(e),className:"relative rounded-lg overflow-hidden cursor-pointer border-4 ".concat(n.includes(e)?"border-sky-500":"border-transparent"),children:[(0,h.jsx)("img",{src:e,alt:"Post content ".concat(t+1),className:"w-full h-full object-cover"}),n.includes(e)&&(0,h.jsx)("div",{className:"absolute inset-0 bg-sky-500 bg-opacity-50 flex items-center justify-center text-white text-2xl",children:"\u2713"})]},t))}),(0,h.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,h.jsx)("button",{onClick:l,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cancel"}),(0,h.jsx)("button",{onClick:()=>{r(n),o([])},className:"px-4 py-2 rounded bg-sky-600 text-white hover:bg-sky-700",children:"Add Selected"})]})]})})},v=e=>{let{id:t,thumbnail:a,index:l,moveThumbnail:r,onRemove:i,onAltTextChange:c}=e;const d=(0,s.useRef)(null),[,u]=(0,n.H)({accept:"thumbnail",hover(e){d.current&&e.index!==l&&(r(e.index,l),e.index=l)}}),[{isDragging:m},p]=(0,o.i)({type:"thumbnail",item:{type:"thumbnail",id:t,index:l},collect:e=>({isDragging:e.isDragging()})});return p(u(d)),(0,h.jsxs)("div",{ref:d,style:{opacity:m?.5:1},className:"p-2 border rounded-lg bg-white flex items-start gap-3",children:[(0,h.jsx)("img",{src:a.preview,alt:"preview",className:"w-24 h-24 object-cover rounded-md flex-shrink-0"}),(0,h.jsxs)("div",{className:"flex-grow",children:[(0,h.jsx)("input",{type:"text",value:a.altText||"",onChange:e=>c(l,e.target.value),placeholder:"Alt text",className:"w-full p-2 text-sm border border-gray-300 rounded mb-2"}),(0,h.jsx)("button",{type:"button",onClick:()=>i(l),className:"text-xs text-red-600 hover:underline",children:"Remove"})]})]})},j=e=>{let{thumbnails:t,setThumbnails:a,onUploadClick:l,onAddFromPostClick:r}=e;const n=(0,s.useCallback)((e,t)=>{a(a=>{const s=[...a],[l]=s.splice(e,1);return s.splice(t,0,l),s})},[a]),o=e=>a(t=>t.filter((t,a)=>a!==e)),d=(e,t)=>{a(a=>{const s=[...a];return s[e].altText=t,s})};return(0,h.jsx)(i.Q,{backend:c.t2,children:(0,h.jsxs)("div",{className:"p-4 border rounded-lg space-y-4 bg-gray-50",children:[(0,h.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-2",children:t.length>0?t.map((e,t)=>(0,h.jsx)(v,{index:t,id:e.id||t,thumbnail:e,moveThumbnail:n,onRemove:o,onAltTextChange:d},e.id||t)):(0,h.jsx)("p",{className:"text-center text-gray-500 text-sm py-4",children:"No story thumbnails yet."})}),(0,h.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,h.jsxs)("button",{type:"button",onClick:l,className:"flex-1 flex items-center justify-center gap-2 text-sm p-2 rounded-lg font-semibold bg-sky-50 text-sky-700 hover:bg-sky-100",children:[(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload New"]}),(0,h.jsxs)("button",{type:"button",onClick:r,className:"flex-1 flex items-center justify-center gap-2 text-sm p-2 rounded-lg font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200",children:[(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Add from Post"]})]})]})})},w=()=>"group_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),N=()=>{const{id:e}=(0,l.g)(),t=(0,l.Zp)(),[a,n]=(0,s.useState)(null),[o,i]=(0,s.useState)("Idle"),[c,d]=(0,s.useState)(""),[v,N]=(0,s.useState)(""),[k,S]=(0,s.useState)(null),[C,T]=(0,s.useState)(!1),[L,O]=(0,s.useState)([]),[U,A]=(0,s.useState)(""),[F,M]=(0,s.useState)([]),[D,I]=(0,s.useState)(!1),[R,E]=(0,s.useState)(""),[_,P]=(0,s.useState)({isOpen:!1,type:null,src:"",aspect:void 0}),[H,W]=(0,s.useState)(""),[z,B]=(0,s.useState)(""),[q,J]=(0,s.useState)(""),[G,K]=(0,s.useState)(""),[Q,V]=(0,s.useState)(""),[$,Y]=(0,s.useState)("single"),[Z,X]=(0,s.useState)([]),[ee,te]=(0,s.useState)(null),[ae,se]=(0,s.useState)(null),[le,re]=(0,s.useState)(!1),[ne,oe]=(0,s.useState)([]),[ie,ce]=(0,s.useState)(""),[de,ue]=(0,s.useState)(null),[me,he]=(0,s.useState)(""),[pe,xe]=(0,s.useState)(null),[ge,be]=(0,s.useState)(null),[ye,fe]=(0,s.useState)(""),[ve,je]=(0,s.useState)(!1),[we,Ne]=(0,s.useState)(null),[ke,Se]=(0,s.useState)("DEFAULT"),[Ce,Te]=(0,s.useState)(null),[Le,Oe]=(0,s.useState)(""),Ue=(0,s.useRef)(null),Ae=(0,s.useRef)(null),Fe=(0,s.useRef)(!1),Me=(0,s.useRef)(null);(0,s.useEffect)(()=>{(async()=>{try{const a=await(0,u.bW)();if(Array.isArray(a.data)&&M(a.data),e){const t=(await(0,u.f5)(e)).data;if(n(t.id),d(t.title),N(t.content),t.category&&a.data){const e=a.data.find(e=>e.name===t.category.name);S(e||null)}if(O(t.tags||[]),T(t.featured),B(t.customSnippet||""),J(t.metaDescription||""),K(t.keywords||""),V(t.coverImageAltText||""),Oe(t.userFriendlySlug||""),Se(t.layoutStyle||"DEFAULT"),Te(t.layoutGroupId||null),t.thumbnails&&t.thumbnails.length>0){Y("story");const e=t.thumbnailOrientation||"landscape";te(e),se("landscape"===e?16/9:.8);const a=t.thumbnails.map(e=>({id:e.id,preview:"".concat(u.H$,"/api/uploads/").concat(e.imageUrl,"-small.webp"),altText:e.altText||"",source:"existing",url:e.imageUrl,file:null})).sort((e,t)=>e.displayOrder-t.displayOrder);X(a)}t.coverImageUrl&&he("".concat(u.H$,"/api/uploads/").concat(t.coverImageUrl,".webp")),t.scheduledTime&&W(new Date(t.scheduledTime).toISOString().slice(0,16))}else{var t;(null===(t=a.data)||void 0===t?void 0:t.length)>0&&S(a.data[0])}}catch(a){A("Failed to load initial data."),console.error(a)}})()},[e]);const De=(0,s.useCallback)(async()=>{if(c.trim()||v.trim()){i("Saving...");try{const e=Ue.current?Ue.current.getContents(!0):v,s={title:c,content:e,customSnippet:z,metaDescription:q,keywords:G};if(a)await(0,u.jA)(a,s);else{const e=await(0,u.mq)(s);n(e.data.id),t("/dashboard/blog/edit/".concat(e.data.userFriendlySlug,"/").concat(e.data.id),{replace:!0})}i("Saved")}catch(e){i("Error"),console.error("Auto-save failed:",e)}}},[c,v,z,q,G,a,t]);(0,s.useEffect)(()=>(Me.current&&clearTimeout(Me.current),Me.current=setTimeout(()=>De(),2e3),()=>clearTimeout(Me.current)),[c,v,z,q,G,De]);const Ie=async e=>{if(!e)return null;const t={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/webp"};try{return await(0,r.A)(e,t)}catch(a){return e}},Re=(e,t,a)=>{if(e.target.files&&e.target.files.length>0){const s=new FileReader;s.addEventListener("load",()=>{var e;return P({isOpen:!0,type:t,src:(null===(e=s.result)||void 0===e?void 0:e.toString())||"",aspect:a})}),s.readAsDataURL(e.target.files[0])}e.target.value=null},Ee=async e=>{const t=await g(e),a=await Ie(t),s=URL.createObjectURL(a),l={id:"new-".concat(Date.now()),preview:s,altText:"",source:"new",file:new File([a],"thumbnail-".concat(Date.now(),".webp"),{type:"image/webp"})};X(e=>[...e,l])};return(0,h.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50 overflow-hidden",children:[(0,h.jsx)("input",{type:"file",ref:Ae,className:"hidden",accept:"image/*"}),(0,h.jsx)(f,{images:ne,isOpen:le,onClose:()=>re(!1),onSelect:e=>{const t=e.map(e=>({id:"existing-".concat(e,"-").concat(Date.now()),preview:e,altText:"",source:"existing",file:null,url:new URL(e).pathname.replace("/api/uploads/","")}));X([...Z,...t]),re(!1)}}),_.isOpen&&(0,h.jsx)(b,{src:_.src,type:_.type,onClose:()=>P({isOpen:!1,type:null,src:"",aspect:void 0}),onSave:async(e,t)=>{if(P({isOpen:!1,type:null,src:"",aspect:void 0}),"story-thumbnail"===_.type)if(ee)Ee(e);else{const{width:a,height:s}=t,l=a/s;if(l>.95&&l<1.05)return Ne({canvas:e}),void je(!0);te(a>s?"landscape":"portrait"),se(l),Ee(e)}else{const t=await g(e),a=await Ie(t),s=URL.createObjectURL(a);if("single-thumbnail"===_.type)ue(a),ce(s);else if("cover"===_.type)xe(a),he(s);else if("suneditor"===_.type&&ge){const e=new FormData;e.append("file",a,"image.webp"),(0,u.QM)(e).then(e=>ge(e.data)).catch(e=>{alert("Image upload failed in editor."),ge()})}}},aspect:_.aspect}),(0,h.jsx)(y,{isOpen:ve,onChoice:e=>{const t="landscape"===e?16/9:.8;te(e),se(t),we&&Ee(we.canvas),je(!1),Ne(null)}}),(0,h.jsxs)("div",{className:"flex flex-col md:flex-row flex-grow overflow-hidden",children:[(0,h.jsxs)("div",{className:"w-full md:w-1/3 p-6 bg-white border-r border-gray-200 flex flex-col overflow-y-auto",style:{maxHeight:"100vh"},children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:a?"Edit Post":"Create New Post"}),(0,h.jsxs)("div",{className:"text-sm",children:["Saving..."===o&&(0,h.jsx)("span",{className:"text-gray-500",children:"Saving..."}),"Saved"===o&&(0,h.jsx)("span",{className:"text-green-600",children:"Saved"}),"Error"===o&&(0,h.jsx)("span",{className:"text-red-600",children:"Save Error!"})]})]}),U&&(0,h.jsx)("p",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:U}),(0,h.jsxs)("form",{id:"blog-editor-form",onSubmit:async e=>{if(e.preventDefault(),A(""),!Ue.current)return A("Editor is not yet available.");if(!k)return A("Please select a category.");const s=new FormData;if(s.append("title",c),s.append("content",Ue.current.getContents(!0)),s.append("category",k.name),s.append("featured",C),s.append("customSnippet",z),s.append("metaDescription",q),s.append("keywords",G),s.append("coverImageAltText",Q),L.forEach(e=>s.append("tags",e)),H&&s.append("scheduledTime",new Date(H).toISOString()),pe&&s.append("coverImage",pe),s.append("layoutStyle",ke),ke.startsWith("MULTI_COLUMN")?s.append("layoutGroupId",Ce||w()):s.append("layoutGroupId",""),s.append("userFriendlySlug",Le),"story"===$){s.append("thumbnailOrientation",ee);const e=Z.map((e,t)=>({source:e.source,fileName:"new"===e.source?e.file.name:null,url:"existing"===e.source?e.url:null,altText:e.altText,displayOrder:t}));s.append("thumbnailMetadata",JSON.stringify(e)),Z.forEach(e=>{"new"===e.source&&s.append("newThumbnails",e.file)})}else if(de){const e=[{source:"new",fileName:"thumbnail.webp",altText:ye,displayOrder:0}];s.append("thumbnailMetadata",JSON.stringify(e)),s.append("newThumbnails",de,"thumbnail.webp")}else if(ie){const e=[{source:"existing",url:new URL(ie).pathname.replace("/api/uploads/","").replace("-small.webp",""),altText:ye,displayOrder:0}];s.append("thumbnailMetadata",JSON.stringify(e))}else s.append("thumbnailMetadata",JSON.stringify([]));try{a?await(0,u.gg)(a,s):await(0,u.pD)(s),t("/dashboard/manage-posts")}catch(l){A("Failed to save the post. Check console for details."),console.error(l)}},className:"flex flex-col gap-6 flex-grow",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"title",className:"block text-gray-700 font-semibold mb-2",children:"Title"}),(0,h.jsx)("input",{type:"text",id:"title",value:c,onChange:e=>d(e.target.value),className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"userFriendlySlug",className:"block text-gray-700 font-semibold mb-2",children:"URL Slug (SEO Friendly)"}),(0,h.jsx)("input",{type:"text",id:"userFriendlySlug",value:Le,onChange:e=>Oe(e.target.value),placeholder:"e.g., guide-to-market-analysis",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"keywords",className:"block text-gray-700 font-semibold mb-2",children:"Keywords (Comma-separated)"}),(0,h.jsx)("input",{type:"text",id:"keywords",value:G,onChange:e=>K(e.target.value),className:"w-full p-2 border border-gray-300 rounded",placeholder:"e.g., investing, stocks, financial freedom"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"metaDescription",className:"block text-gray-700 font-semibold mb-2",children:"Meta Description (for SEO)"}),(0,h.jsx)("textarea",{id:"metaDescription",value:q,onChange:e=>J(e.target.value),rows:"3",className:"w-full p-2 border border-gray-300 rounded",placeholder:"A brief summary for search engines (about 155 characters)."})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"customSnippet",className:"block text-gray-700 font-semibold mb-2",children:"Custom Snippet (for Previews)"}),(0,h.jsx)("textarea",{id:"customSnippet",value:z,onChange:e=>B(e.target.value),rows:"3",className:"w-full p-2 border border-gray-300 rounded",placeholder:"A short preview for display on the blog page."})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"category",className:"block text-gray-700 font-semibold mb-2",children:"Category"}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("select",{id:"category",value:k?k.name:"",onChange:e=>{const t=F.find(t=>t.name===e.target.value);S(t)},className:"w-full p-2 border border-gray-300 rounded",children:[(0,h.jsx)("option",{value:"",children:"Select a category"}),F&&F.map(e=>(0,h.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,h.jsx)("button",{type:"button",onClick:()=>I(!D),className:"p-2 bg-gray-200 rounded hover:bg-gray-300 text-lg font-bold",children:"+"})]}),D&&(0,h.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,h.jsx)("input",{type:"text",value:R,onChange:e=>E(e.target.value),placeholder:"New category name",className:"w-full p-2 border border-gray-300 rounded"}),(0,h.jsx)("button",{type:"button",onClick:async()=>{if(!R)return;if(F.some(e=>e.name.toLowerCase()===R.toLowerCase()))return alert("Category name cannot be a duplicate.");try{const e=await(0,u.Ah)({name:R});M([...F,e.data]),S(e.data),E(""),I(!1)}catch(e){A("Failed to add new category."),console.error(e)}},className:"px-4 py-2 bg-sky-600 text-white rounded hover:bg-sky-700",children:"Add"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"layoutStyle",className:"block text-gray-700 font-semibold mb-2",children:"Layout Style"}),(0,h.jsxs)("select",{id:"layoutStyle",value:ke,onChange:e=>{const t=e.target.value;Se(t),t.startsWith("MULTI_COLUMN")?Ce||Te(w()):Te(null)},className:"w-full p-2 border border-gray-300 rounded",children:[(0,h.jsx)("option",{value:"DEFAULT",children:"Default (Masonry)"}),(0,h.jsx)("option",{value:"BANNER",children:"Banner"}),(0,h.jsx)("option",{value:"MULTI_COLUMN_2",children:"2 Column Row"}),(0,h.jsx)("option",{value:"MULTI_COLUMN_3",children:"3 Column Row"}),(0,h.jsx)("option",{value:"MULTI_COLUMN_4",children:"4 Column Row"}),(0,h.jsx)("option",{value:"MULTI_COLUMN_5",children:"5 Column Row"}),(0,h.jsx)("option",{value:"MULTI_COLUMN_6",children:"6 Column Row"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"Tags"}),(0,h.jsx)(x,{tags:L,setTags:O})]}),(0,h.jsxs)("div",{className:"my-4",children:[(0,h.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"Thumbnail Mode"}),(0,h.jsxs)("div",{className:"flex rounded-lg p-1 bg-gray-200",children:[(0,h.jsx)("button",{type:"button",onClick:()=>Y("single"),className:"flex-1 p-2 rounded-md text-sm font-semibold transition ".concat("single"===$?"bg-white text-sky-600 shadow":"text-gray-600"),children:"Single Image"}),(0,h.jsx)("button",{type:"button",onClick:()=>Y("story"),className:"flex-1 p-2 rounded-md text-sm font-semibold transition ".concat("story"===$?"bg-white text-sky-600 shadow":"text-gray-600"),children:"Story Thumbnails"})]})]}),"single"===$?(0,h.jsxs)("div",{className:"p-4 border rounded-lg space-y-3 bg-gray-50",children:[(0,h.jsx)("label",{className:"block text-gray-700 font-semibold",children:"Thumbnail Image"}),ie&&(0,h.jsx)("img",{src:ie,alt:"Thumbnail Preview",className:"w-full h-auto aspect-video object-contain my-4 border rounded-lg bg-white"}),(0,h.jsx)("button",{type:"button",onClick:()=>{Ae.current.multiple=!1,Ae.current.onchange=e=>Re(e,"single-thumbnail"),Ae.current.click()},className:"w-full text-sm p-2 rounded-lg font-semibold bg-sky-50 text-sky-700 hover:bg-sky-100",children:"Upload Thumbnail"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"thumbnailAltText",className:"text-sm font-medium text-gray-600",children:"Alt Text"}),(0,h.jsx)("input",{type:"text",id:"thumbnailAltText",value:ye,onChange:e=>fe(e.target.value),placeholder:"Describe the image for SEO",className:"w-full mt-1 p-2 text-sm border border-gray-300 rounded"})]})]}):(0,h.jsx)(j,{thumbnails:Z,setThumbnails:X,onUploadClick:()=>{Ae.current.multiple=!1,Ae.current.onchange=e=>Re(e,"story-thumbnail",ae),Ae.current.click()},onAddFromPostClick:()=>{if(!Ue.current)return;const e=Ue.current.getContents(!0),t=(new DOMParser).parseFromString(e,"text/html"),a=Array.from(t.querySelectorAll("img")).map(e=>e.src);oe(a),re(!0)}}),(0,h.jsxs)("div",{className:"p-4 border rounded-lg space-y-3 bg-gray-50",children:[(0,h.jsx)("label",{className:"block text-gray-700 font-semibold",children:"Cover Image"}),me&&(0,h.jsx)("img",{src:me,alt:"Cover Preview",className:"w-full h-auto aspect-video object-contain my-4 border rounded-lg bg-white"}),(0,h.jsx)("button",{type:"button",onClick:()=>{Ae.current.multiple=!1,Ae.current.onchange=e=>Re(e,"cover"),Ae.current.click()},className:"w-full text-sm p-2 rounded-lg font-semibold bg-sky-50 text-sky-700 hover:bg-sky-100",children:"Upload Cover Image"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"coverImageAltText",className:"text-sm font-medium text-gray-600",children:"Cover Image Alt Text"}),(0,h.jsx)("input",{type:"text",id:"coverImageAltText",value:Q,onChange:e=>V(e.target.value),placeholder:"Describe the cover image for SEO",className:"w-full mt-1 p-2 text-sm border border-gray-300 rounded"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"scheduledTime",className:"block text-gray-700 font-semibold mb-2",children:"Schedule Publication"}),(0,h.jsx)("input",{type:"datetime-local",id:"scheduledTime",value:H,onChange:e=>W(e.target.value),className:"w-full p-2 border border-gray-300 rounded"}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to publish immediately."})]}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("input",{type:"checkbox",checked:C,onChange:e=>T(e.target.checked),className:"h-5 w-5 text-sky-600 border-gray-300 rounded focus:ring-sky-500"}),(0,h.jsx)("span",{className:"ml-2 text-gray-700",children:"Mark as Featured"})]}),(0,h.jsx)("button",{type:"submit",className:"w-full bg-sky-600 text-white font-bold py-3 rounded-lg hover:bg-sky-700 transition",children:a?"Update Post":"Publish Post"})]})]}),(0,h.jsxs)("div",{className:"w-full md:w-2/3 p-6 flex flex-col h-full overflow-y-auto",children:[(0,h.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"Content"}),(0,h.jsx)("div",{className:"flex-grow h-full",children:(0,h.jsx)(s.Suspense,{fallback:(0,h.jsx)("div",{children:"Loading editor..."}),children:(0,h.jsx)(p,{setContents:v,onChange:N,getSunEditorInstance:e=>{Ue.current=e},onImageUploadBefore:(e,t,a)=>{const s=e[0];if(!s)return;be(()=>a);const l=new FileReader;return l.addEventListener("load",()=>{var e;return P({isOpen:!0,type:"suneditor",src:(null===(e=l.result)||void 0===e?void 0:e.toString())||""})}),l.readAsDataURL(s),!1},onLoad:()=>{Ue.current&&v&&!Fe.current&&(Fe.current=!0)},setOptions:{height:"auto",minHeight:"400px",buttonList:m.buttonList.complex,pasteKeepFormats:!0,pasteTagsWhitelist:".*"}})})})]})]})]})}}}]);
//# sourceMappingURL=212.26179c2f.chunk.js.map