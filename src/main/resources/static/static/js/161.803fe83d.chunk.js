"use strict";(self.webpackChunktreishvaam_finance_frontend=self.webpackChunktreishvaam_finance_frontend||[]).push([[161],{5491:(e,t,s)=>{s.d(t,{A:()=>c});s(5043);var a=s(9379),r=s(3986),l=s(579);const o=["src","srcSet","alt","onLoad"],d=e=>{let{src:t,srcSet:s,alt:d,onLoad:n}=e,c=(0,r.A)(e,o);return t?(0,l.jsx)("img",(0,a.A)({src:t,srcSet:s,alt:d,onLoad:n},c)):(0,l.jsx)("div",(0,a.A)({className:"w-full h-full bg-gray-200 animate-pulse"},c))};var n=s(6355);const c=e=>{let{baseName:t,alt:s,className:a,sizes:r,onLoad:o}=e;if(!t||"string"!==typeof t)return(0,l.jsx)("div",{className:"bg-gray-200 ".concat(a)});const c=t.match(/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/);if(!c)return console.warn('ResponsiveAuthImage: Could not extract a valid image ID from baseName: "'.concat(t,'"')),(0,l.jsx)("div",{className:"bg-gray-200 ".concat(a)});const i=c[0],h="".concat(n.H$,"/api/uploads/").concat(i,"-small.webp"),x=["".concat(n.H$,"/api/uploads/").concat(i,"-small.webp 300w"),"".concat(n.H$,"/api/uploads/").concat(i,"-medium.webp 600w"),"".concat(n.H$,"/api/uploads/").concat(i,".webp 1200w")].join(", ");return(0,l.jsx)(d,{src:h,srcSet:x,sizes:r,alt:s,className:a,loading:"lazy",onLoad:o})}},6161:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(9379),r=s(5043),l=s(1045),o=s(6355),d=s(5491),n=s(579);const c=e=>{let{post:t,onShare:s,onClose:a}=e;const[l,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),i="https://treishfin.treishvaamgroup.com/blog/".concat(t.id);return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Share to LinkedIn"}),(0,n.jsxs)("p",{className:"mb-2 text-sm text-gray-600",children:[(0,n.jsx)("strong",{children:"Post:"})," ",t.title]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Message (Optional)"}),(0,n.jsx)("textarea",{id:"message",value:l,onChange:e=>o(e.target.value),rows:"4",className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",placeholder:"Check out this article: ".concat(t.title,"\n\n").concat(i)})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hashtags (comma-separated)"}),(0,n.jsx)("input",{type:"text",id:"tags",value:d,onChange:e=>c(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm",placeholder:"e.g., #finance, #investing, #fintech"})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)("button",{onClick:a,className:"py-2 px-4 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>{s({postId:t.id,message:l,tags:d.split(",").map(e=>e.trim()).filter(Boolean)})},className:"py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Share to LinkedIn"})]})]})})};var i=s(184);const h=e=>{if(!e)return"No date available";const t=new Date(e);return isNaN(t.getTime())?"No date available":t.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})},x=e=>{if(!e||"DEFAULT"===e)return"Masonry";if("BANNER"===e)return"Banner";if(e.startsWith("MULTI_COLUMN_")){const t=e.split("_")[2];return"".concat(t," Column Row")}return e},u=e=>{let{posts:t,handleDelete:s,handleDuplicate:a,handleOpenShareModal:o,isScheduled:c=!1,isDraft:u=!1,selectedPostIds:m,onSelectOne:b,onSelectAll:g,isAddColumnDisabled:p}=e;const y=(0,l.Zp)(),f=(0,r.useMemo)(()=>t.length>0&&m.length===t.length,[m,t]);return t&&0!==t.length?(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full leading-normal",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left",children:(0,n.jsx)("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-sky-600 rounded focus:ring-sky-500",checked:f,onChange:g})}),(0,n.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Title"}),(0,n.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),(0,n.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Post Layout"}),(0,n.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:u?"Last Saved":c?"Scheduled For":"Last Updated"}),(0,n.jsx)("th",{className:"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>{var t;return(0,n.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(m.includes(e.id)?"bg-sky-50":""),children:[(0,n.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,n.jsx)("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-sky-600 rounded focus:ring-sky-500",checked:m.includes(e.id),onChange:()=>b(e.id)})}),(0,n.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 mr-4",children:(0,n.jsx)(d.A,{baseName:e.thumbnails&&e.thumbnails.length>0?e.thumbnails[0].imageUrl:null,alt:e.title,className:"w-full h-full rounded-full object-cover",sizes:"40px"})}),(0,n.jsx)("p",{className:"text-gray-900 font-medium",children:e.title})]})}),(0,n.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,n.jsx)("span",{className:"bg-gray-100 text-gray-700 text-xs font-semibold px-2 py-1 rounded-full",children:(null===(t=e.category)||void 0===t?void 0:t.name)||"N/A"})}),(0,n.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,n.jsx)("span",{className:"text-gray-800",children:x(e.layoutStyle)})}),(0,n.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,n.jsx)("p",{className:"text-gray-900",children:h(c?e.scheduledTime:e.updatedAt||e.createdAt)})}),(0,n.jsx)("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[!c&&!u&&(0,n.jsx)("button",{onClick:()=>o(e),className:"text-gray-500 hover:text-green-600",title:"Share",children:(0,n.jsx)(i.eb3,{})}),(0,n.jsx)("button",{onClick:()=>y("/dashboard/blog/edit/".concat(e.userFriendlySlug,"/").concat(e.id)),className:"text-gray-500 hover:text-sky-600",title:"Edit",children:(0,n.jsx)(i.uO9,{})}),(0,n.jsx)("button",{onClick:()=>s(e.id),className:"text-gray-500 hover:text-red-600",title:"Delete",children:(0,n.jsx)(i.qbC,{})}),e.layoutStyle&&e.layoutStyle.startsWith("MULTI_COLUMN")&&(0,n.jsx)("button",{onClick:()=>a(e.id),className:"text-gray-500 ".concat(p(e.layoutGroupId,e.layoutStyle)?"opacity-50 cursor-not-allowed":"hover:text-blue-600"),title:p(e.layoutGroupId,e.layoutStyle)?"Group is full":"Add post column",disabled:p(e.layoutGroupId,e.layoutStyle),children:(0,n.jsx)(i.paH,{})})]})})]},e.id)})})]})}):(0,n.jsxs)("p",{className:"p-6 text-center text-gray-500",children:["No ",u?"drafts":c?"scheduled":"published"," posts found."]})},m=()=>{const e=(0,l.zy)(),[t,s]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[x,m]=(0,r.useState)(""),[b,g]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),[f,j]=(0,r.useState)("published"),[N,w]=(0,r.useState)([]),v=(0,r.useCallback)(async()=>{try{const[e,t]=await Promise.all([(0,o.pr)(),(0,o.Vp)()]);s(e.data||[]),h(t.data||[])}catch(e){m("Failed to fetch posts or drafts."),console.error(e)}},[]);(0,r.useEffect)(()=>{v()},[v]),(0,r.useEffect)(()=>{"#drafts"===e.hash&&j("drafts")},[e.hash]),(0,r.useEffect)(()=>{w([])},[f]);const{publishedPosts:k,scheduledPosts:S}=(0,r.useMemo)(()=>({publishedPosts:t.filter(e=>"PUBLISHED"===e.status),scheduledPosts:t.filter(e=>"SCHEDULED"===e.status)}),[t]),C=(0,r.useMemo)(()=>{const e={};return[...t,...d].forEach(t=>{t.layoutGroupId&&(e[t.layoutGroupId]=(e[t.layoutGroupId]||0)+1)}),e},[t,d]),A=(0,r.useCallback)((e,t)=>{if(!e||!t||!t.startsWith("MULTI_COLUMN"))return!0;try{const s=parseInt(t.split("_")[2],10);return(C[e]||0)>=s}catch(s){return!0}},[C]),L=(0,r.useMemo)(()=>"published"===f?k:"drafts"===f?d:"scheduled"===f?S:[],[f,k,d,S]),I=e=>{if(e.target.checked){const e=L.map(e=>e.id);w(e)}else w([])},D={handleDelete:async e=>{if(window.confirm("Are you sure you want to delete this post?"))try{await(0,o.ys)(e),await v()}catch(t){m("Failed to delete the post.")}},handleDuplicate:async e=>{if(window.confirm("This will create a new draft by duplicating the selected post's layout. Continue?"))try{await(0,o.QL)(e),await v(),j("drafts")}catch(t){m("Failed to duplicate the post."),console.error(t)}},handleOpenShareModal:e=>{y(e),g(!0)},selectedPostIds:N,onSelectOne:e=>{w(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},isAddColumnDisabled:A};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"container mx-auto p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Manage Posts"}),(0,n.jsxs)(l.N_,{to:"/dashboard/blog/new",className:"bg-sky-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 transition flex items-center",children:[(0,n.jsx)(i.OiG,{className:"mr-2"})," Create New Post"]})]}),N.length>0&&(0,n.jsxs)("div",{className:"mb-4 p-3 bg-sky-100 border border-sky-200 rounded-lg flex items-center gap-4",children:[(0,n.jsxs)("p",{className:"text-sm font-semibold text-sky-800",children:[N.length," post(s) selected."]}),(0,n.jsxs)("button",{onClick:async()=>{if(0!==N.length&&window.confirm("Are you sure you want to delete ".concat(N.length," selected post(s)?")))try{await(0,o.bT)(N),w([]),await v()}catch(e){m("Failed to delete the selected posts."),console.error(e)}},className:"bg-red-600 text-white text-sm font-bold py-1 px-3 rounded-lg hover:bg-red-700 transition flex items-center",children:[(0,n.jsx)(i.qbC,{className:"mr-2"})," Delete Selected"]})]}),(0,n.jsx)("div",{className:"mb-4 border-b border-gray-200",children:(0,n.jsxs)("nav",{className:"flex space-x-4","aria-label":"Tabs",children:[(0,n.jsxs)("button",{onClick:()=>j("published"),className:"px-3 py-2 font-medium text-sm rounded-t-lg ".concat("published"===f?"border-b-2 border-sky-600 text-sky-600":"text-gray-500 hover:text-gray-700"),children:["Published (",k.length,")"]}),(0,n.jsxs)("button",{onClick:()=>j("drafts"),className:"px-3 py-2 font-medium text-sm rounded-t-lg ".concat("drafts"===f?"border-b-2 border-sky-600 text-sky-600":"text-gray-500 hover:text-gray-700"),children:["Drafts (",d.length,")"]}),(0,n.jsxs)("button",{onClick:()=>j("scheduled"),className:"px-3 py-2 font-medium text-sm rounded-t-lg ".concat("scheduled"===f?"border-b-2 border-sky-600 text-sky-600":"text-gray-500 hover:text-gray-700"),children:["Scheduled (",S.length,")"]})]})}),x&&(0,n.jsx)("p",{className:"text-red-500 bg-red-100 p-3 rounded mb-4",children:x}),(0,n.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:["published"===f&&(0,n.jsx)(u,(0,a.A)((0,a.A)({posts:k},D),{},{onSelectAll:I})),"drafts"===f&&(0,n.jsx)(u,(0,a.A)((0,a.A)({posts:d},D),{},{onSelectAll:I,isDraft:!0})),"scheduled"===f&&(0,n.jsx)(u,(0,a.A)((0,a.A)({posts:S},D),{},{onSelectAll:I,isScheduled:!0}))]})]}),b&&(0,n.jsx)(c,{post:p,onClose:()=>g(!1)})]})}}}]);
//# sourceMappingURL=161.803fe83d.chunk.js.map