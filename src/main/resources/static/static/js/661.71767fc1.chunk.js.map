{"version":3,"file":"static/js/661.71767fc1.chunk.js","mappings":"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","sources":["components/ResponsiveAuthImage.js","components/ShareButtons.js","components/TableOfContents.js","pages/SinglePostPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport 'react-lazy-load-image-component/src/effects/opacity.css'; // Using opacity for a smoother transition\r\nimport { API_URL } from '../apiConfig';\r\nimport { decode } from 'blurhash';\r\n\r\n// This component decodes the blurhash and draws it to a canvas.\r\nconst BlurHashCanvas = ({ hash, width, height, punch = 1 }) => {\r\n    const canvasRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (canvasRef.current && hash && width && height) {\r\n            try {\r\n                const pixels = decode(hash, width, height, punch);\r\n                const ctx = canvasRef.current.getContext(\"2d\");\r\n                if (ctx) {\r\n                    const imageData = ctx.createImageData(width, height);\r\n                    imageData.data.set(pixels);\r\n                    ctx.putImageData(imageData, 0, 0);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Failed to decode blurhash\", error);\r\n            }\r\n        }\r\n    }, [hash, width, height, punch]);\r\n\r\n    if (!hash || !width || !height) return null;\r\n\r\n    return (\r\n        <canvas\r\n            ref={canvasRef}\r\n            width={width}\r\n            height={height}\r\n            className=\"absolute inset-0 w-full h-full\"\r\n        />\r\n    );\r\n};\r\n\r\nconst ResponsiveAuthImage = ({ baseName, alt, className, sizes, onLoad, eager = false, width, height, blurHash }) => {\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    const handleImageLoad = () => {\r\n        setIsLoaded(true);\r\n        if (onLoad) {\r\n            onLoad();\r\n        }\r\n    };\r\n\r\n    if (!baseName || typeof baseName !== 'string') {\r\n        return <div className={`bg-gray-200 ${className}`} style={{ aspectRatio: width && height ? `${width}/${height}` : '1' }} />;\r\n    }\r\n\r\n    const uuidRegex = /([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/;\r\n    const match = baseName.match(uuidRegex);\r\n\r\n    if (!match) {\r\n        console.warn(`ResponsiveAuthImage: Could not extract a valid image ID from baseName: \"${baseName}\"`);\r\n        return <div className={`bg-gray-200 ${className}`} style={{ aspectRatio: width && height ? `${width}/${height}` : '1' }} />;\r\n    }\r\n\r\n    const cleanedBaseName = match[0];\r\n\r\n    const src = `${API_URL}/api/uploads/${cleanedBaseName}-small.webp`;\r\n    const srcSet = [\r\n        `${API_URL}/api/uploads/${cleanedBaseName}-small.webp 300w`,\r\n        `${API_URL}/api/uploads/${cleanedBaseName}-medium.webp 600w`,\r\n        `${API_URL}/api/uploads/${cleanedBaseName}.webp 1200w`\r\n    ].join(', ');\r\n\r\n    const imageProps = {\r\n        alt, // alt is still passed here for LazyLoadImage\r\n        src,\r\n        srcSet,\r\n        sizes,\r\n        className: `transition-opacity duration-300 ${isLoaded ? 'opacity-100' : 'opacity-0'} ${className}`,\r\n        width,\r\n        height,\r\n    };\r\n\r\n    if (eager) {\r\n        return (\r\n            <img\r\n                src={src}\r\n                srcSet={srcSet}\r\n                sizes={sizes}\r\n                className={className}\r\n                onLoad={handleImageLoad}\r\n                fetchPriority=\"high\"\r\n                width={width}\r\n                height={height}\r\n                alt={alt} // --- THIS IS THE FIX --- Explicitly adding the alt prop\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative w-full h-full overflow-hidden\">\r\n            {!isLoaded && blurHash && <BlurHashCanvas hash={blurHash} width={32} height={32} />}\r\n            <LazyLoadImage\r\n                {...imageProps}\r\n                effect=\"opacity\"\r\n                afterLoad={handleImageLoad}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ResponsiveAuthImage;","import React from 'react';\r\nimport {\r\n    FacebookShareButton,\r\n    LinkedinShareButton,\r\n    WhatsappShareButton,\r\n    TelegramShareButton,\r\n    TwitterShareButton, // Reverted to TwitterShareButton\r\n} from 'react-share';\r\nimport {\r\n    FacebookIcon,\r\n    LinkedinIcon,\r\n    WhatsappIcon,\r\n    TelegramIcon,\r\n    TwitterIcon, // Reverted to TwitterIcon\r\n} from 'react-share';\r\nimport { FaCopy } from 'react-icons/fa';\r\n\r\nconst ShareButtons = ({ url, title, summary }) => {\r\n    const handleCopy = () => {\r\n        navigator.clipboard.writeText(url);\r\n        alert('Link copied to clipboard!');\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-wrap items-center gap-4 mt-8\">\r\n            <span className=\"font-bold text-gray-700 text-lg mr-2\">Share this article:</span>\r\n            <div className=\"flex items-center gap-3\">\r\n                <TwitterShareButton url={url} title={title}>\r\n                    <TwitterIcon size={40} round />\r\n                </TwitterShareButton>\r\n\r\n                <FacebookShareButton url={url} quote={summary}>\r\n                    <FacebookIcon size={40} round />\r\n                </FacebookShareButton>\r\n\r\n                <LinkedinShareButton url={url} title={title} summary={summary}>\r\n                    <LinkedinIcon size={40} round />\r\n                </LinkedinShareButton>\r\n\r\n                <WhatsappShareButton url={url} title={title} separator=\":: \">\r\n                    <WhatsappIcon size={40} round />\r\n                </WhatsappShareButton>\r\n\r\n                <TelegramShareButton url={url} title={title}>\r\n                    <TelegramIcon size={40} round />\r\n                </TelegramShareButton>\r\n\r\n                <button\r\n                    onClick={handleCopy}\r\n                    className=\"flex items-center justify-center w-10 h-10 bg-gray-200 rounded-full hover:bg-gray-300 transition\"\r\n                    aria-label=\"Copy link\"\r\n                    title=\"Copy Link\"\r\n                >\r\n                    <FaCopy className=\"text-gray-600\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShareButtons;","// src/components/TableOfContents.js\r\nimport React, { useState } from 'react';\r\n\r\nconst TableOfContents = ({ headings, activeId, progress }) => {\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  if (!headings || headings.length === 0) return null;\r\n\r\n  const handleLinkClick = (e, id) => {\r\n    e.preventDefault();\r\n    const element = document.getElementById(id);\r\n    if (element) {\r\n        // Adjust for sticky main navbar height (approx 80px-100px)\r\n        const yOffset = -90; \r\n        const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset;\r\n        window.scrollTo({top: y, behavior: 'smooth'});\r\n    }\r\n  };\r\n\r\n  return (\r\n    // UPDATED: Added relative positioning for the progress bar\r\n    <div className=\"toc-container\">\r\n      {/* NEW: Vertical Progress Bar */}\r\n      <div className=\"toc-progress-track\">\r\n        <div className=\"toc-progress-fill\" style={{ height: `${progress}%` }}></div>\r\n      </div>\r\n\r\n      {/* UPDATED: Added left padding to avoid overlapping the progress bar */}\r\n      <div className=\"pl-5\">\r\n        <button onClick={() => setIsExpanded(!isExpanded)} className=\"toc-header\">\r\n          <span>On this page</span>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className={`toc-chevron ${isExpanded ? '' : '-rotate-90'}`}>\r\n            <path fillRule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        </button>\r\n        {isExpanded && (\r\n          <nav className=\"toc-body\">\r\n            <ul>\r\n              {headings.map((heading) => (\r\n                <li key={heading.id} className=\"toc-list-item\">\r\n                  <a href={`#${heading.id}`} \r\n                     onClick={(e) => handleLinkClick(e, heading.id)}\r\n                     className={`toc-link ${activeId === heading.id ? 'active' : ''}`}\r\n                     style={{ paddingLeft: `${(heading.level - 2) * 0.75 + 0.5}rem` }}>\r\n                    {heading.text}\r\n                  </a>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </nav>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableOfContents;","import React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getPostByUrlId, API_URL } from '../apiConfig';\r\nimport DOMPurify from 'dompurify';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport ResponsiveAuthImage from '../components/ResponsiveAuthImage';\r\nimport ShareButtons from '../components/ShareButtons';\r\nimport throttle from 'lodash/throttle';\r\nimport TableOfContents from '../components/TableOfContents';\r\n\r\nconst formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    return new Date(dateString).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });\r\n};\r\n\r\nconst createSnippet = (html, length = 155) => {\r\n    if (!html) return '';\r\n    const plainText = DOMPurify.sanitize(html, { ALLOWED_TAGS: [] });\r\n    if (plainText.length <= length) return plainText;\r\n    const trimmed = plainText.substring(0, length);\r\n    return trimmed.substring(0, Math.min(trimmed.length, trimmed.lastIndexOf(' '))) + '...';\r\n};\r\n\r\nconst SinglePostPage = () => {\r\n    const { urlArticleId } = useParams();\r\n    const [post, setPost] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [headings, setHeadings] = useState([]);\r\n    const [activeId, setActiveId] = useState('');\r\n    const [progress, setProgress] = useState(0);\r\n    const articleRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const fetchPost = async () => {\r\n            try {\r\n                const response = await getPostByUrlId(urlArticleId);\r\n                setPost(response.data);\r\n            } catch (err) {\r\n                setError('Failed to fetch post.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchPost();\r\n        window.scrollTo(0, 0);\r\n    }, [urlArticleId]);\r\n\r\n    useEffect(() => {\r\n        if (!post?.content) return;\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = DOMPurify.sanitize(post.content, { USE_PROFILES: { html: true }, ADD_ATTR: ['id'] });\r\n        \r\n        const headingElements = tempDiv.querySelectorAll('h2, h3, h4');\r\n        const extractedHeadings = Array.from(headingElements).map((el, index) => {\r\n            const id = `heading-${index}-${el.tagName}`;\r\n            el.id = id;\r\n            return { id, text: el.innerText, level: parseInt(el.tagName.substring(1), 10) };\r\n        });\r\n\r\n        setHeadings(extractedHeadings);\r\n        setPost(currentPost => ({ ...currentPost, contentWithIds: tempDiv.innerHTML }));\r\n    }, [post?.content]);\r\n    \r\n    const handleScroll = useMemo(() => throttle(() => {\r\n        const contentElement = articleRef.current;\r\n        if (!contentElement) return;\r\n\r\n        const articleTop = contentElement.getBoundingClientRect().top + window.scrollY;\r\n        const contentHeight = contentElement.scrollHeight;\r\n        const viewportHeight = window.innerHeight;\r\n\r\n        const scrollableDistance = contentHeight - viewportHeight;\r\n        const scrolledFromTop = window.scrollY - articleTop;\r\n        \r\n        if (scrolledFromTop > 0 && scrollableDistance > 0) {\r\n            const scrollPercent = (scrolledFromTop / scrollableDistance) * 100;\r\n            setProgress(Math.min(100, Math.max(0, scrollPercent)));\r\n        } else {\r\n            setProgress(0);\r\n        }\r\n\r\n        let currentActiveId = '';\r\n        for (let i = headings.length - 1; i >= 0; i--) {\r\n            const element = document.getElementById(headings[i].id);\r\n            if (element && element.getBoundingClientRect().top < 200) {\r\n                currentActiveId = headings[i].id;\r\n                break;\r\n            }\r\n        }\r\n        setActiveId(currentActiveId);\r\n    }, 150), [headings]);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => {\r\n            handleScroll.cancel();\r\n            window.removeEventListener('scroll', handleScroll);\r\n        };\r\n    }, [handleScroll]);\r\n\r\n    if (loading) return <div className=\"text-center py-20\">Loading post...</div>;\r\n    if (error) return <div className=\"text-center py-20 text-red-500\">{error}</div>;\r\n    if (!post) return <div className=\"text-center py-20\">Post not found.</div>;\r\n\r\n    const createMarkup = (htmlContent) => ({ __html: htmlContent });\r\n\r\n    // UPDATED URL\r\n    const pageUrl = `https://treishfin.treishvaamgroup.com/category/${post.category?.slug}/${post.userFriendlySlug}/${post.urlArticleId}`;\r\n    const pageTitle = `Treishvaam Finance · ${post.title}`;\r\n    const seoDescription = post.metaDescription || post.customSnippet || createSnippet(post.content, 155);\r\n    const imageUrl = post.coverImageUrl ? `${API_URL}/api/uploads/${post.coverImageUrl}.webp` : `${window.location.origin}/logo512.png`;\r\n    const homeUrl = window.location.origin;\r\n\r\n    const schema = {\r\n        \"@context\": \"https://schema.org\",\r\n        \"@type\": \"Article\",\r\n        \"headline\": post.title,\r\n        \"image\": imageUrl,\r\n        \"author\": {\r\n            \"@type\": \"Organization\",\r\n            \"name\": \"Treishvaam Finance\",\r\n            \"url\": homeUrl\r\n        },\r\n        \"publisher\": {\r\n            \"@type\": \"Organization\",\r\n            \"name\": \"Treishvaam Finance\",\r\n            \"logo\": {\r\n                \"@type\": \"ImageObject\",\r\n                \"url\": `${homeUrl}/logo512.png`\r\n            }\r\n        },\r\n        \"datePublished\": post.createdAt,\r\n        \"dateModified\": post.updatedAt,\r\n        \"mainEntityOfPage\": {\r\n            \"@type\": \"WebPage\",\r\n            \"@id\": pageUrl\r\n        },\r\n        \"description\": seoDescription,\r\n        \"keywords\": post.keywords || post.tags?.join(', ')\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>{pageTitle}</title>\r\n                <meta name=\"description\" content={seoDescription} />\r\n                {post.keywords && <meta name=\"keywords\" content={post.keywords} />}\r\n                <link rel=\"canonical\" href={pageUrl} />\r\n                <meta property=\"og:type\" content=\"article\" />\r\n                <meta property=\"og:url\" content={pageUrl} />\r\n                <meta property=\"og:title\" content={post.title} />\r\n                <meta property=\"og:description\" content={seoDescription} />\r\n                <meta property=\"og:image\" content={imageUrl} />\r\n                <meta name=\"twitter:card\" content=\"summary_large_image\" />\r\n                <meta name=\"twitter:url\" content={pageUrl} />\r\n                <meta name=\"twitter:title\" content={post.title} />\r\n                <meta name=\"twitter:description\" content={seoDescription} />\r\n                <meta name=\"twitter:image\" content={imageUrl} />\r\n                <script type=\"application/ld+json\">\r\n                    {JSON.stringify(schema)}\r\n                </script>\r\n            </Helmet>\r\n\r\n            <div className=\"max-w-screen-xl mx-auto lg:grid lg:grid-cols-12 lg:gap-x-12 px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"lg:col-span-8 xl:col-span-9 py-8\">\r\n                    <header className=\"mb-8\">\r\n                        <h1 className=\"text-3xl md:text-5xl font-extrabold text-gray-900 leading-tight\">\r\n                            {post.title}\r\n                        </h1>\r\n                        <div className=\"flex items-center text-sm text-gray-500 mt-4 mb-6\">\r\n                            <span>By {post.author || 'Treishvaam Team'}</span>\r\n                            <span className=\"mx-2\">·</span>\r\n                            <time dateTime={post.createdAt}>{formatDate(post.createdAt)}</time>\r\n                        </div>\r\n                        \r\n                        {post.coverImageUrl && (\r\n                            <div className=\"mb-8 rounded-lg overflow-hidden shadow-lg\">\r\n                                <ResponsiveAuthImage baseName={post.coverImageUrl} alt={post.coverImageAltText || post.title} className=\"w-full h-auto object-cover\"/>\r\n                            </div>\r\n                        )}\r\n                    </header>\r\n                    \r\n                    <main ref={articleRef}>\r\n                        <article className=\"prose prose-lg max-w-none\" dangerouslySetInnerHTML={createMarkup(post.contentWithIds || post.content)} />\r\n                        \r\n                        <div className=\"mt-16 pt-8 border-t\">\r\n                            <ShareButtons url={pageUrl} title={post.title} />\r\n                        </div>\r\n                    </main>\r\n                </div>\r\n\r\n                <aside className=\"lg:col-span-4 xl:col-span-3 py-8 hidden lg:block\">\r\n                    <div className=\"sticky top-24\">\r\n                         <TableOfContents \r\n                            headings={headings} \r\n                            activeId={activeId} \r\n                            progress={progress} \r\n                         />\r\n                    </div>\r\n                </aside>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default SinglePostPage;"],"names":["BlurHashCanvas","_ref","hash","width","height","punch","canvasRef","useRef","useEffect","current","pixels","decode","ctx","getContext","imageData","createImageData","data","set","putImageData","error","console","_jsx","ref","className","_ref2","baseName","alt","sizes","onLoad","eager","blurHash","isLoaded","setIsLoaded","useState","handleImageLoad","concat","style","aspectRatio","match","warn","cleanedBaseName","src","API_URL","srcSet","join","imageProps","fetchPriority","_jsxs","children","LazyLoadImage","_objectSpread","effect","afterLoad","url","title","summary","TwitterShareButton","TwitterIcon","size","round","FacebookShareButton","quote","FacebookIcon","LinkedinShareButton","LinkedinIcon","WhatsappShareButton","separator","WhatsappIcon","TelegramShareButton","TelegramIcon","onClick","handleCopy","navigator","clipboard","writeText","alert","FaCopy","headings","activeId","progress","isExpanded","setIsExpanded","length","xmlns","viewBox","fill","fillRule","d","clipRule","map","heading","href","id","e","handleLinkClick","preventDefault","element","document","getElementById","yOffset","y","getBoundingClientRect","top","window","pageYOffset","scrollTo","behavior","paddingLeft","level","text","SinglePostPage","_post$category","_post$tags","urlArticleId","useParams","post","setPost","loading","setLoading","setError","setHeadings","setActiveId","setProgress","articleRef","async","response","getPostByUrlId","err","fetchPost","content","tempDiv","createElement","innerHTML","DOMPurify","sanitize","USE_PROFILES","html","ADD_ATTR","headingElements","querySelectorAll","extractedHeadings","Array","from","el","index","tagName","innerText","parseInt","substring","currentPost","contentWithIds","handleScroll","useMemo","throttle","contentElement","articleTop","scrollY","scrollableDistance","scrollHeight","innerHeight","scrolledFromTop","scrollPercent","Math","min","max","currentActiveId","i","addEventListener","cancel","removeEventListener","pageUrl","category","slug","userFriendlySlug","pageTitle","seoDescription","metaDescription","customSnippet","arguments","undefined","plainText","ALLOWED_TAGS","trimmed","lastIndexOf","createSnippet","imageUrl","coverImageUrl","location","origin","homeUrl","schema","createdAt","updatedAt","keywords","tags","_Fragment","Helmet","name","rel","property","type","JSON","stringify","author","dateTime","dateString","Date","toLocaleDateString","year","month","day","ResponsiveAuthImage","coverImageAltText","dangerouslySetInnerHTML","htmlContent","__html","ShareButtons","TableOfContents"],"sourceRoot":""}