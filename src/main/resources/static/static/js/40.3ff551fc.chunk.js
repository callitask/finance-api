"use strict";(self.webpackChunktreishvaam_finance_frontend=self.webpackChunktreishvaam_finance_frontend||[]).push([[40],{608:()=>{},922:(e,t,s)=>{s.d(t,{D4:()=>m});var a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],l=e=>{let t=0;for(let s=0;s<e.length;s++){let l=e[s];t=83*t+a.indexOf(l)}return t},n=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},r=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(12.92*t*255+.5):Math.trunc(255*(1.055*Math.pow(t,.4166666666666667)-.055)+.5)},i=(e,t)=>(e=>e<0?-1:1)(e)*Math.pow(Math.abs(e),t),o=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},c=e=>{if(!e||e.length<6)throw new o("The blurhash string must be at least 6 characters");let t=l(e[0]),s=Math.floor(t/9)+1,a=t%9+1;if(e.length!==4+2*a*s)throw new o("blurhash length mismatch: length is ".concat(e.length," but it should be ").concat(4+2*a*s))},d=e=>{let t=e>>8&255,s=255&e;return[n(e>>16),n(t),n(s)]},h=(e,t)=>{let s=Math.floor(e/361),a=Math.floor(e/19)%19,l=e%19;return[i((s-9)/9,2)*t,i((a-9)/9,2)*t,i((l-9)/9,2)*t]},m=(e,t,s,a)=>{c(e),a|=1;let n=l(e[0]),i=Math.floor(n/9)+1,o=n%9+1,m=(l(e[1])+1)/166,u=new Array(o*i);for(let r=0;r<u.length;r++)if(0===r){let t=l(e.substring(2,6));u[r]=d(t)}else{let t=l(e.substring(4+2*r,6+2*r));u[r]=h(t,m*a)}let x=4*t,g=new Uint8ClampedArray(x*s);for(let l=0;l<s;l++)for(let e=0;e<t;e++){let a=0,n=0,c=0;for(let r=0;r<i;r++)for(let i=0;i<o;i++){let d=Math.cos(Math.PI*e*i/t)*Math.cos(Math.PI*l*r/s),h=u[i+r*o];a+=h[0]*d,n+=h[1]*d,c+=h[2]*d}let d=r(a),h=r(n),m=r(c);g[4*e+0+l*x]=d,g[4*e+1+l*x]=h,g[4*e+2+l*x]=m,g[4*e+3+l*x]=255}return g}},1748:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(9379),l=s(5043),n=s(9634),r=(s(608),s(6355)),i=s(922),o=s(579);const c=e=>{let{hash:t,width:s,height:a,punch:n=1}=e;const r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(r.current&&t&&s&&a)try{const e=(0,i.D4)(t,s,a,n),l=r.current.getContext("2d");if(l){const t=l.createImageData(s,a);t.data.set(e),l.putImageData(t,0,0)}}catch(e){console.error("Failed to decode blurhash",e)}},[t,s,a,n]),t&&s&&a?(0,o.jsx)("canvas",{ref:r,width:s,height:a,className:"absolute inset-0 w-full h-full"}):null},d=e=>{let{baseName:t,alt:s,className:i,sizes:d,onLoad:h,eager:m=!1,width:u,height:x,blurHash:g}=e;const[f,p]=(0,l.useState)(!1),b=()=>{p(!0),h&&h()};if(!t||"string"!==typeof t)return(0,o.jsx)("div",{className:"bg-gray-200 ".concat(i),style:{aspectRatio:u&&x?"".concat(u,"/").concat(x):"1"}});const j=t.match(/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/);if(!j)return console.warn('ResponsiveAuthImage: Could not extract a valid image ID from baseName: "'.concat(t,'"')),(0,o.jsx)("div",{className:"bg-gray-200 ".concat(i),style:{aspectRatio:u&&x?"".concat(u,"/").concat(x):"1"}});const y=j[0],N={alt:s,src:"".concat(r.H$,"/api/uploads/").concat(y,"-small.webp"),srcSet:["".concat(r.H$,"/api/uploads/").concat(y,"-small.webp 300w"),"".concat(r.H$,"/api/uploads/").concat(y,"-medium.webp 600w"),"".concat(r.H$,"/api/uploads/").concat(y,".webp 1200w")].join(", "),sizes:d,className:"transition-opacity duration-300 ".concat(f?"opacity-100":"opacity-0"," ").concat(i),width:u,height:x};return m?(0,o.jsx)("img",(0,a.A)((0,a.A)({},N),{},{className:i,onLoad:b,fetchPriority:"high"})):(0,o.jsxs)("div",{className:"relative w-full h-full overflow-hidden",children:[!f&&g&&(0,o.jsx)(c,{hash:g,width:32,height:32}),(0,o.jsx)(n.LazyLoadImage,(0,a.A)((0,a.A)({},N),{},{effect:"opacity",afterLoad:b}))]})}},4472:(e,t,s)=>{s.d(t,{A:()=>u});var a=s(9379),l=s(5043),n=s(6355),r=s(184);const i=e=>{if(e<0)return{hours:0,minutes:0,seconds:0,isFinished:!0};return{hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),isFinished:!1}};var o=s(579);const c=e=>{let{log:t}=e;const s="SUCCESS"===t.status;return(0,o.jsxs)("div",{className:"text-xs border-l-4 pl-3",style:{borderColor:s?"#10B981":"#EF4444"},children:[(0,o.jsxs)("div",{className:"flex items-center font-semibold",style:{color:s?"#059669":"#DC2626"},children:[s?(0,o.jsx)(r.A7C,{className:"mr-2"}):(0,o.jsx)(r.TNq,{className:"mr-2"}),t.status," - ",(0,o.jsx)("span",{className:"font-normal text-gray-500 ml-1",children:(a=t.lastFetchTime,new Date(a).toLocaleString())})]}),(0,o.jsxs)("p",{className:"text-gray-600 mt-1",children:["Source: ",(0,o.jsx)("span",{className:"font-medium",children:t.triggerSource}),". Details: ",t.details]})]});var a},d=e=>{let{title:t,logs:s,onRefresh:a,onFlush:n,nextRefreshTime:d}=e;const[h,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),{hours:p,minutes:b,seconds:j,isFinished:y}=(e=>{const t=(0,l.useMemo)(()=>new Date(e).getTime(),[e]),[s,a]=(0,l.useState)(t-(new Date).getTime());return(0,l.useEffect)(()=>{const e=setInterval(()=>{a(t-(new Date).getTime())},1e3);return()=>clearInterval(e)},[t]),i(s)})(d),N=async(e,t)=>{x(!0);try{await t(e)}catch(s){console.error("Flush failed:",s)}x(!1)},v=e=>e.toString().padStart(2,"0"),w=y?"Refresh due":"".concat(v(p),"h ").concat(v(b),"m ").concat(v(j),"s"),C=g?s:s.slice(0,3);return(0,o.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:t}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:async()=>{m(!0),await a(),m(!1)},disabled:h,className:"p-2 text-sm text-sky-600 bg-sky-100 hover:bg-sky-200 rounded-full transition disabled:opacity-50 disabled:cursor-wait",title:"Refresh Data Now",children:(0,o.jsx)(r.DIg,{className:h?"animate-spin":""})}),(0,o.jsx)("button",{onClick:()=>n(N),disabled:u,className:"p-2 text-sm text-red-600 bg-red-100 hover:bg-red-200 rounded-full transition disabled:opacity-50",title:"Flush Cached Data",children:(0,o.jsx)(r.qbC,{})})]})]}),d&&(0,o.jsxs)("p",{className:"text-xs text-gray-500 mb-4",children:["Auto-refresh in: ",(0,o.jsx)("span",{className:"font-semibold text-gray-600",children:w})]}),(0,o.jsx)("div",{className:"space-y-3",children:C.length>0?C.map(e=>(0,o.jsx)(c,{log:e},e.id)):(0,o.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No logs available."})}),s.length>3&&(0,o.jsxs)("button",{onClick:()=>f(!g),className:"text-sm text-sky-600 font-semibold mt-4 flex items-center",children:[g?"Show Recent Logs":"Show All Logs",g?(0,o.jsx)(r.Ucs,{className:"ml-2"}):(0,o.jsx)(r.Vr3,{className:"ml-2"})]})]})},h=e=>{let{isOpen:t,onClose:s,onConfirm:a,title:n,isLoading:r}=e;const[i,c]=(0,l.useState)("");if(!t)return null;return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:n}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"This is a destructive action. To confirm, please enter your admin password."}),(0,o.jsx)("input",{type:"password",value:i,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter your password",autoFocus:!0}),(0,o.jsxs)("div",{className:"flex justify-end mt-6 space-x-3",children:[(0,o.jsx)("button",{onClick:()=>{c(""),s()},disabled:r,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{a(i),c("")},disabled:!i||r,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-wait",children:r?"Flushing...":"Confirm & Flush"})]})]})})};function m(e,t,s){const a=new Date;let l=new Date;return l.setUTCHours(e,t,0,0),a.getTime()>l.getTime()&&l.setUTCDate(l.getUTCDate()+1),l}const u=()=>{const[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[i,c]=(0,l.useState)({isOpen:!1,onConfirm:null,title:""}),[u,x]=(0,l.useState)(!1),g=(0,l.useCallback)(async()=>{r(!0);try{const e=await(0,n.r$)();t(e.data)}catch(e){console.error("Failed to fetch API status history:",e)}finally{r(!1)}},[]);(0,l.useEffect)(()=>{g()},[g]);const f=[{title:"US Market Indices (Charts)",logFilters:["Market Chart"],onRefresh:n.FE,flushHandler:n.av,nextRefreshTime:null},{title:"Top Gainers (US)",logFilters:["Market Data - Top Gainers (US)"],onRefresh:n.Cn,flushHandler:n.fk,nextRefreshTime:m(22,0,"UTC")},{title:"Top Losers (US)",logFilters:["Market Data - Top Losers (US)"],onRefresh:n.Cn,flushHandler:n.fk,nextRefreshTime:m(22,0,"UTC")},{title:"Most Active (US)",logFilters:["Market Data - Most Active (US)"],onRefresh:n.Cn,flushHandler:n.fk,nextRefreshTime:m(22,0,"UTC")}];return(0,o.jsxs)("div",{className:"bg-gray-50 p-4 sm:p-6 lg:p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"API Status & Control Center"}),s?(0,o.jsx)("p",{children:"Loading logs..."}):(0,o.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:f.map(t=>{return(0,o.jsx)(d,{title:t.title,logs:(s=t.logFilters,e.filter(e=>s.some(t=>e.apiName.includes(t)))),onRefresh:t.onRefresh,onFlush:e=>{return s=s=>e(s,t.flushHandler),a="Flush ".concat(t.title),void c({isOpen:!0,onConfirm:e=>s(e),title:a});var s,a},nextRefreshTime:t.nextRefreshTime},t.title);var s})}),(0,o.jsx)(h,{isOpen:i.isOpen,onClose:()=>c((0,a.A)((0,a.A)({},i),{},{isOpen:!1})),onConfirm:async e=>{if(i.onConfirm){x(!0);try{await i.onConfirm(e)}catch(a){var t,s;console.error("Action failed:",a),alert("Action failed: ".concat((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||a.message))}finally{x(!1),c({isOpen:!1,onConfirm:null,title:""}),await g()}}},title:i.title,isLoading:u})]})}},8040:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(5043),l=s(697),n=s(6355),r=s(184),i=s(5439),o=s(1748),c=s(4472),d=s(579);const h=e=>{let{icon:t,title:s,value:a,color:l}=e;return(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm flex items-center",children:[(0,d.jsx)("div",{className:"p-3 rounded-full mr-4 ".concat(l),children:t}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:s}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})},m=()=>{const{user:e}=(0,l.A)(),[t,s]=(0,a.useState)([]),[m,u]=(0,a.useState)(""),x="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:8080"}.REACT_APP_API_BASE_URL||"https://backend.treishvaamgroup.com","/oauth2/authorization/linkedin");(0,a.useEffect)(()=>{const e=async()=>{try{const e=await(0,n.pr)();s(e.data)}catch(e){u("Could not load dashboard data."),console.error(e)}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const g=(0,a.useMemo)(()=>[...t].filter(e=>"PUBLISHED"===e.status).sort((e,t)=>new Date(t.updatedAt||t.createdAt)-new Date(e.updatedAt||e.createdAt)).slice(0,5),[t]),f=(0,a.useMemo)(()=>t.filter(e=>"PUBLISHED"===e.status).length,[t]),p=(0,a.useMemo)(()=>t.filter(e=>"SCHEDULED"===e.status).length,[t]);return(0,d.jsxs)("div",{className:"container mx-auto p-6 md:p-8",children:[(0,d.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:["Welcome, ",(null===e||void 0===e?void 0:e.name)||"Admin","!"]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,d.jsx)(h,{icon:(0,d.jsx)(r.t69,{className:"text-white"}),title:"Published Posts",value:f,color:"bg-sky-500"}),(0,d.jsx)(h,{icon:(0,d.jsx)(r.Ny1,{className:"text-white"}),title:"Scheduled Posts",value:p,color:"bg-amber-500"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,d.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,d.jsx)(c.A,{}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Quick Actions"}),(0,d.jsxs)(i.N_,{to:"/dashboard/blog/new",className:"w-full flex items-center justify-center bg-sky-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-sky-700 transition duration-300",children:[(0,d.jsx)(r.Hw0,{className:"mr-2"})," Create New Post"]})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Integrations"}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(r.QEs,{className:"text-2xl text-blue-700 mr-3"}),(0,d.jsx)("span",{className:"font-medium",children:"LinkedIn"})]}),e&&e.linkedinConnected?(0,d.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Connected"}):(0,d.jsx)("a",{href:x,className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-300",children:"Connect"})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"Connect your LinkedIn account to enable direct sharing of blog posts."})]})]}),(0,d.jsxs)("div",{className:"lg:col-span-2 bg-white p-6 rounded-lg shadow-sm",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Recent Posts"}),(0,d.jsxs)("div",{className:"space-y-4",children:[m&&(0,d.jsx)("p",{className:"text-red-500",children:m}),g.length>0?g.map(e=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-12 h-12 flex-shrink-0 mr-4",children:(0,d.jsx)(o.A,{baseName:e.thumbnails&&e.thumbnails.length>0?e.thumbnails[0].imageUrl:null,alt:e.title,className:"w-full h-full rounded-lg object-cover",sizes:"48px"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-semibold text-gray-800",children:e.title}),(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:["Published on ",new Date(e.updatedAt||e.createdAt).toLocaleDateString()]})]})]}),(0,d.jsx)(i.N_,{to:"/dashboard/blog/edit/".concat(e.userFriendlySlug,"/").concat(e.id),className:"text-sky-600 hover:underline text-sm font-semibold",children:"Edit"})]},e.id)):!m&&(0,d.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No recent posts to display."})]})]})]})]})}}}]);
//# sourceMappingURL=40.3ff551fc.chunk.js.map