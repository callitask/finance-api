{"version":3,"file":"static/js/279.144d9e77.chunk.js","mappings":"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","sources":["components/ResponsiveAuthImage.js","components/ShareButtons.js","components/TableOfContents.js","pages/SinglePostPage.js"],"sourcesContent":["import React from 'react';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport 'react-lazy-load-image-component/src/effects/blur.css';\r\nimport { API_URL } from '../apiConfig';\r\n\r\nconst ResponsiveAuthImage = ({ baseName, alt, className, sizes, onLoad }) => {\r\n    // Render a simple placeholder if baseName is invalid.\r\n    if (!baseName || typeof baseName !== 'string') {\r\n        return <div className={`bg-gray-200 ${className}`} />;\r\n    }\r\n\r\n    const uuidRegex = /([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/;\r\n    const match = baseName.match(uuidRegex);\r\n\r\n    if (!match) {\r\n        console.warn(`ResponsiveAuthImage: Could not extract a valid image ID from baseName: \"${baseName}\"`);\r\n        return <div className={`bg-gray-200 ${className}`} />;\r\n    }\r\n\r\n    const cleanedBaseName = match[0];\r\n\r\n    // Construct image URLs\r\n    const src = `${API_URL}/api/uploads/${cleanedBaseName}-small.webp`;\r\n    const placeholderSrc = `${API_URL}/api/uploads/${cleanedBaseName}-tiny.webp`; // New tiny version for the blur effect\r\n    const srcSet = [\r\n        `${API_URL}/api/uploads/${cleanedBaseName}-small.webp 300w`,\r\n        `${API_URL}/api/uploads/${cleanedBaseName}-medium.webp 600w`,\r\n        `${API_URL}/api/uploads/${cleanedBaseName}.webp 1200w`\r\n    ].join(', ');\r\n\r\n    return (\r\n        <LazyLoadImage\r\n            alt={alt}\r\n            src={src}\r\n            srcSet={srcSet}\r\n            sizes={sizes}\r\n            placeholderSrc={placeholderSrc}\r\n            effect=\"blur\"\r\n            className={className}\r\n            afterLoad={onLoad} // Use afterLoad for the library's load event\r\n        />\r\n    );\r\n};\r\n\r\nexport default ResponsiveAuthImage;","import React from 'react';\r\nimport {\r\n    FacebookShareButton,\r\n    LinkedinShareButton,\r\n    WhatsappShareButton,\r\n    TelegramShareButton,\r\n    TwitterShareButton, // Reverted to TwitterShareButton\r\n} from 'react-share';\r\nimport {\r\n    FacebookIcon,\r\n    LinkedinIcon,\r\n    WhatsappIcon,\r\n    TelegramIcon,\r\n    TwitterIcon, // Reverted to TwitterIcon\r\n} from 'react-share';\r\nimport { FaCopy } from 'react-icons/fa';\r\n\r\nconst ShareButtons = ({ url, title, summary }) => {\r\n    const handleCopy = () => {\r\n        navigator.clipboard.writeText(url);\r\n        alert('Link copied to clipboard!');\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-wrap items-center gap-4 mt-8\">\r\n            <span className=\"font-bold text-gray-700 text-lg mr-2\">Share this article:</span>\r\n            <div className=\"flex items-center gap-3\">\r\n                <TwitterShareButton url={url} title={title}>\r\n                    <TwitterIcon size={40} round />\r\n                </TwitterShareButton>\r\n\r\n                <FacebookShareButton url={url} quote={summary}>\r\n                    <FacebookIcon size={40} round />\r\n                </FacebookShareButton>\r\n\r\n                <LinkedinShareButton url={url} title={title} summary={summary}>\r\n                    <LinkedinIcon size={40} round />\r\n                </LinkedinShareButton>\r\n\r\n                <WhatsappShareButton url={url} title={title} separator=\":: \">\r\n                    <WhatsappIcon size={40} round />\r\n                </WhatsappShareButton>\r\n\r\n                <TelegramShareButton url={url} title={title}>\r\n                    <TelegramIcon size={40} round />\r\n                </TelegramShareButton>\r\n\r\n                <button\r\n                    onClick={handleCopy}\r\n                    className=\"flex items-center justify-center w-10 h-10 bg-gray-200 rounded-full hover:bg-gray-300 transition\"\r\n                    aria-label=\"Copy link\"\r\n                    title=\"Copy Link\"\r\n                >\r\n                    <FaCopy className=\"text-gray-600\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShareButtons;","// src/components/TableOfContents.js\r\nimport React, { useState } from 'react';\r\n\r\nconst TableOfContents = ({ headings, activeId, progress }) => {\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  if (!headings || headings.length === 0) return null;\r\n\r\n  const handleLinkClick = (e, id) => {\r\n    e.preventDefault();\r\n    const element = document.getElementById(id);\r\n    if (element) {\r\n        // Adjust for sticky main navbar height (approx 80px-100px)\r\n        const yOffset = -90; \r\n        const y = element.getBoundingClientRect().top + window.pageYOffset + yOffset;\r\n        window.scrollTo({top: y, behavior: 'smooth'});\r\n    }\r\n  };\r\n\r\n  return (\r\n    // UPDATED: Added relative positioning for the progress bar\r\n    <div className=\"toc-container\">\r\n      {/* NEW: Vertical Progress Bar */}\r\n      <div className=\"toc-progress-track\">\r\n        <div className=\"toc-progress-fill\" style={{ height: `${progress}%` }}></div>\r\n      </div>\r\n\r\n      {/* UPDATED: Added left padding to avoid overlapping the progress bar */}\r\n      <div className=\"pl-5\">\r\n        <button onClick={() => setIsExpanded(!isExpanded)} className=\"toc-header\">\r\n          <span>On this page</span>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className={`toc-chevron ${isExpanded ? '' : '-rotate-90'}`}>\r\n            <path fillRule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        </button>\r\n        {isExpanded && (\r\n          <nav className=\"toc-body\">\r\n            <ul>\r\n              {headings.map((heading) => (\r\n                <li key={heading.id} className=\"toc-list-item\">\r\n                  <a href={`#${heading.id}`} \r\n                     onClick={(e) => handleLinkClick(e, heading.id)}\r\n                     className={`toc-link ${activeId === heading.id ? 'active' : ''}`}\r\n                     style={{ paddingLeft: `${(heading.level - 2) * 0.75 + 0.5}rem` }}>\r\n                    {heading.text}\r\n                  </a>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </nav>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableOfContents;","import React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getPostByUrlId, API_URL } from '../apiConfig';\r\nimport DOMPurify from 'dompurify';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport ResponsiveAuthImage from '../components/ResponsiveAuthImage';\r\nimport ShareButtons from '../components/ShareButtons';\r\nimport throttle from 'lodash/throttle';\r\nimport TableOfContents from '../components/TableOfContents';\r\n\r\nconst formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    return new Date(dateString).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });\r\n};\r\n\r\nconst createSnippet = (html, length = 160) => {\r\n    if (!html) return '';\r\n    const plainText = DOMPurify.sanitize(html, { ALLOWED_TAGS: [] });\r\n    if (plainText.length <= length) return plainText;\r\n    const trimmed = plainText.substring(0, length);\r\n    return trimmed.substring(0, Math.min(trimmed.length, trimmed.lastIndexOf(' '))) + '...';\r\n};\r\n\r\nconst SinglePostPage = () => {\r\n    const { urlArticleId } = useParams();\r\n\r\n    // --- STATE HYDRATION LOGIC ---\r\n    // Check if the backend injected data for THIS specific article\r\n    const preloadedData = (typeof window !== 'undefined' &&\r\n        window.__PRELOADED_STATE__ &&\r\n        window.__PRELOADED_STATE__.urlArticleId === urlArticleId)\r\n        ? window.__PRELOADED_STATE__\r\n        : null;\r\n\r\n    const [post, setPost] = useState(preloadedData);\r\n    const [loading, setLoading] = useState(!preloadedData); // Skip loading if we have data\r\n    const [error, setError] = useState(null);\r\n    const [headings, setHeadings] = useState([]);\r\n    const [activeId, setActiveId] = useState('');\r\n    const [progress, setProgress] = useState(0);\r\n    const articleRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // If we have preloaded data, skip the fetch and clean up the global variable\r\n        if (post) {\r\n            setLoading(false);\r\n            // Optional: Clear it so navigating to another page doesn't reuse it incorrectly\r\n            if (window.__PRELOADED_STATE__ && window.__PRELOADED_STATE__.urlArticleId === urlArticleId) {\r\n                delete window.__PRELOADED_STATE__;\r\n            }\r\n            return;\r\n        }\r\n\r\n        const fetchPost = async () => {\r\n            try {\r\n                const response = await getPostByUrlId(urlArticleId);\r\n                setPost(response.data);\r\n            } catch (err) {\r\n                setError('Failed to fetch post.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchPost();\r\n        window.scrollTo(0, 0);\r\n    }, [urlArticleId]); // Dependency on urlArticleId ensures we refetch if URL changes\r\n\r\n    useEffect(() => {\r\n        if (!post?.content) return;\r\n        const tempDiv = document.createElement('div');\r\n        tempDiv.innerHTML = DOMPurify.sanitize(post.content, { USE_PROFILES: { html: true }, ADD_ATTR: ['id'] });\r\n\r\n        const headingElements = tempDiv.querySelectorAll('h2, h3, h4');\r\n        const extractedHeadings = Array.from(headingElements).map((el, index) => {\r\n            const id = `heading-${index}-${el.tagName}`;\r\n            el.id = id;\r\n            return { id, text: el.innerText, level: parseInt(el.tagName.substring(1), 10) };\r\n        });\r\n\r\n        setHeadings(extractedHeadings);\r\n        setPost(currentPost => ({ ...currentPost, contentWithIds: tempDiv.innerHTML }));\r\n    }, [post?.content]);\r\n\r\n    const handleScroll = useMemo(() => throttle(() => {\r\n        const contentElement = articleRef.current;\r\n        if (!contentElement) return;\r\n\r\n        const articleTop = contentElement.getBoundingClientRect().top + window.scrollY;\r\n        const contentHeight = contentElement.scrollHeight;\r\n        const viewportHeight = window.innerHeight;\r\n\r\n        const scrollableDistance = contentHeight - viewportHeight;\r\n        const scrolledFromTop = window.scrollY - articleTop;\r\n\r\n        if (scrolledFromTop > 0 && scrollableDistance > 0) {\r\n            const scrollPercent = (scrolledFromTop / scrollableDistance) * 100;\r\n            setProgress(Math.min(100, Math.max(0, scrollPercent)));\r\n        } else {\r\n            setProgress(0);\r\n        }\r\n\r\n        let currentActiveId = '';\r\n        for (let i = headings.length - 1; i >= 0; i--) {\r\n            const element = document.getElementById(headings[i].id);\r\n            if (element && element.getBoundingClientRect().top < 200) {\r\n                currentActiveId = headings[i].id;\r\n                break;\r\n            }\r\n        }\r\n        setActiveId(currentActiveId);\r\n    }, 150), [headings]);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => {\r\n            handleScroll.cancel();\r\n            window.removeEventListener('scroll', handleScroll);\r\n        };\r\n    }, [handleScroll]);\r\n\r\n    if (loading) return <div className=\"text-center py-20\">Loading post...</div>;\r\n    if (error) return <div className=\"text-center py-20 text-red-500\">{error}</div>;\r\n    if (!post) return <div className=\"text-center py-20\">Post not found.</div>;\r\n\r\n    const createMarkup = (htmlContent) => ({ __html: htmlContent });\r\n\r\n    const pageUrl = `https://treishfin.treishvaamgroup.com/category/${post.category?.slug}/${post.userFriendlySlug}/${post.urlArticleId}`;\r\n\r\n    const pageTitle = `Treishfin · ${post.title}`;\r\n    const seoDescription = post.metaDescription || post.customSnippet || createSnippet(post.content, 160);\r\n    const imageUrl = post.coverImageUrl ? `${API_URL}/api/uploads/${post.coverImageUrl}.webp` : `${window.location.origin}/logo.webp`;\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>{pageTitle}</title>\r\n                <meta name=\"description\" content={seoDescription} />\r\n                {post.keywords && <meta name=\"keywords\" content={post.keywords} />}\r\n                <link rel=\"canonical\" href={pageUrl} />\r\n\r\n                <meta property=\"og:type\" content=\"article\" />\r\n                <meta property=\"og:url\" content={pageUrl} />\r\n                <meta property=\"og:title\" content={post.title} />\r\n                <meta property=\"og:description\" content={seoDescription} />\r\n                <meta property=\"og:image\" content={imageUrl} />\r\n\r\n                <meta name=\"twitter:card\" content=\"summary_large_image\" />\r\n                <meta name=\"twitter:url\" content={pageUrl} />\r\n                <meta name=\"twitter:title\" content={post.title} />\r\n                <meta name=\"twitter:description\" content={seoDescription} />\r\n                <meta name=\"twitter:image\" content={imageUrl} />\r\n            </Helmet>\r\n\r\n            <div className=\"max-w-screen-xl mx-auto lg:grid lg:grid-cols-12 lg:gap-x-12 px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"lg:col-span-8 xl:col-span-9 py-8\">\r\n                    <header className=\"mb-8\">\r\n                        <h1 className=\"text-3xl md:text-5xl font-extrabold text-gray-900 leading-tight\">\r\n                            {post.title}\r\n                        </h1>\r\n                        <div className=\"flex items-center text-sm text-gray-500 mt-4 mb-6\">\r\n                            <span>By {post.author || 'Treishvaam Team'}</span>\r\n                            <span className=\"mx-2\">·</span>\r\n                            <time dateTime={post.createdAt}>{formatDate(post.createdAt)}</time>\r\n                        </div>\r\n\r\n                        {post.coverImageUrl && (\r\n                            <div className=\"mb-8 rounded-lg overflow-hidden shadow-lg\">\r\n                                <ResponsiveAuthImage baseName={post.coverImageUrl} alt={post.coverImageAltText || post.title} className=\"w-full h-auto object-cover\" />\r\n                            </div>\r\n                        )}\r\n                    </header>\r\n\r\n                    <main ref={articleRef}>\r\n                        <article className=\"prose prose-lg max-w-none\" dangerouslySetInnerHTML={createMarkup(post.contentWithIds || post.content)} />\r\n\r\n                        <div className=\"mt-16 pt-8 border-t\">\r\n                            <ShareButtons url={pageUrl} title={post.title} />\r\n                        </div>\r\n                    </main>\r\n                </div>\r\n\r\n                <aside className=\"lg:col-span-4 xl:col-span-3 py-8 hidden lg:block\">\r\n                    <div className=\"sticky top-24\">\r\n                        <TableOfContents\r\n                            headings={headings}\r\n                            activeId={activeId}\r\n                            progress={progress}\r\n                        />\r\n                    </div>\r\n                </aside>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default SinglePostPage;"],"names":["_ref","baseName","alt","className","sizes","onLoad","_jsx","concat","match","console","warn","cleanedBaseName","src","API_URL","placeholderSrc","srcSet","join","LazyLoadImage","effect","afterLoad","url","title","summary","_jsxs","children","TwitterShareButton","TwitterIcon","size","round","FacebookShareButton","quote","FacebookIcon","LinkedinShareButton","LinkedinIcon","WhatsappShareButton","separator","WhatsappIcon","TelegramShareButton","TelegramIcon","onClick","handleCopy","navigator","clipboard","writeText","alert","FaCopy","headings","activeId","progress","isExpanded","setIsExpanded","useState","length","style","height","xmlns","viewBox","fill","fillRule","d","clipRule","map","heading","href","id","e","handleLinkClick","preventDefault","element","document","getElementById","yOffset","y","getBoundingClientRect","top","window","pageYOffset","scrollTo","behavior","paddingLeft","level","text","SinglePostPage","_post$category","urlArticleId","useParams","preloadedData","__PRELOADED_STATE__","post","setPost","loading","setLoading","error","setError","setHeadings","setActiveId","setProgress","articleRef","useRef","useEffect","async","response","getPostByUrlId","data","err","fetchPost","content","tempDiv","createElement","innerHTML","DOMPurify","sanitize","USE_PROFILES","html","ADD_ATTR","headingElements","querySelectorAll","extractedHeadings","Array","from","el","index","tagName","innerText","parseInt","substring","currentPost","_objectSpread","contentWithIds","handleScroll","useMemo","throttle","contentElement","current","articleTop","scrollY","scrollableDistance","scrollHeight","innerHeight","scrolledFromTop","scrollPercent","Math","min","max","currentActiveId","i","addEventListener","cancel","removeEventListener","pageUrl","category","slug","userFriendlySlug","pageTitle","seoDescription","metaDescription","customSnippet","arguments","undefined","plainText","ALLOWED_TAGS","trimmed","lastIndexOf","createSnippet","imageUrl","coverImageUrl","location","origin","_Fragment","Helmet","name","keywords","rel","property","author","dateTime","createdAt","dateString","Date","toLocaleDateString","year","month","day","ResponsiveAuthImage","coverImageAltText","ref","dangerouslySetInnerHTML","htmlContent","__html","ShareButtons","TableOfContents"],"sourceRoot":""}